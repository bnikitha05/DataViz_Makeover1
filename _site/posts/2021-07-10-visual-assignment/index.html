<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>IDEA: visual-assignment</title>

<meta property="description" itemprop="description" content="A short description of the post."/>


<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2021-07-10"/>
<meta property="article:created" itemprop="dateCreated" content="2021-07-10"/>
<meta name="article:author" content="Nikitha Banda"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="IDEA: visual-assignment"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="A short description of the post."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="IDEA"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary"/>
<meta property="twitter:title" content="IDEA: visual-assignment"/>
<meta property="twitter:description" content="A short description of the post."/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["visual-assignment"]},{"type":"character","attributes":{},"value":["A short description of the post."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Nikitha Banda"]},{"type":"character","attributes":{},"value":["https://www.linkedin.com/in/banda-nikitha"]}]}]},{"type":"character","attributes":{},"value":["07-10-2021"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["toc","toc_depth","self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[3]},{"type":"logical","attributes":{},"value":[false]}]}]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["data/cleanArticles.csv","data/cleanArticles.xlsx","data/cleanEmail.csv","data/cleanEmployee.csv","data/email headers.csv","data/EmployeeRecords.xlsx","data/News Articles/All News Today/121.txt","data/News Articles/All News Today/135.txt","data/News Articles/All News Today/152.txt","data/News Articles/All News Today/154.txt","data/News Articles/All News Today/237.txt","data/News Articles/All News Today/251.txt","data/News Articles/All News Today/341.txt","data/News Articles/All News Today/391.txt","data/News Articles/All News Today/420.txt","data/News Articles/All News Today/554.txt","data/News Articles/All News Today/603.txt","data/News Articles/All News Today/612.txt","data/News Articles/All News Today/617.txt","data/News Articles/All News Today/683.txt","data/News Articles/All News Today/698.txt","data/News Articles/All News Today/714.txt","data/News Articles/All News Today/753.txt","data/News Articles/All News Today/77.txt","data/News Articles/Athena Speaks/138.txt","data/News Articles/Athena Speaks/140.txt","data/News Articles/Athena Speaks/141.txt","data/News Articles/Athena Speaks/160.txt","data/News Articles/Athena Speaks/191.txt","data/News Articles/Athena Speaks/202.txt","data/News Articles/Athena Speaks/220.txt","data/News Articles/Athena Speaks/231.txt","data/News Articles/Athena Speaks/255.txt","data/News Articles/Athena Speaks/270.txt","data/News Articles/Athena Speaks/295.txt","data/News Articles/Athena Speaks/354.txt","data/News Articles/Athena Speaks/383.txt","data/News Articles/Athena Speaks/405.txt","data/News Articles/Athena Speaks/433.txt","data/News Articles/Athena Speaks/466.txt","data/News Articles/Athena Speaks/48.txt","data/News Articles/Athena Speaks/516.txt","data/News Articles/Athena Speaks/519.txt","data/News Articles/Athena Speaks/601.txt","data/News Articles/Athena Speaks/610.txt","data/News Articles/Athena Speaks/615.txt","data/News Articles/Athena Speaks/64.txt","data/News Articles/Athena Speaks/652.txt","data/News Articles/Athena Speaks/74.txt","data/News Articles/Central Bulletin/113.txt","data/News Articles/Central Bulletin/123.txt","data/News Articles/Central Bulletin/125.txt","data/News Articles/Central Bulletin/136.txt","data/News Articles/Central Bulletin/151.txt","data/News Articles/Central Bulletin/170.txt","data/News Articles/Central Bulletin/213.txt","data/News Articles/Central Bulletin/244.txt","data/News Articles/Central Bulletin/34.txt","data/News Articles/Central Bulletin/37.txt","data/News Articles/Central Bulletin/401.txt","data/News Articles/Central Bulletin/403.txt","data/News Articles/Central Bulletin/565.txt","data/News Articles/Central Bulletin/578.txt","data/News Articles/Central Bulletin/604.txt","data/News Articles/Central Bulletin/618.txt","data/News Articles/Central Bulletin/673.txt","data/News Articles/Central Bulletin/734.txt","data/News Articles/Central Bulletin/745.txt","data/News Articles/Central Bulletin/798.txt","data/News Articles/Central Bulletin/800.txt","data/News Articles/Centrum Sentinel/118.txt","data/News Articles/Centrum Sentinel/13.txt","data/News Articles/Centrum Sentinel/142.txt","data/News Articles/Centrum Sentinel/15.txt","data/News Articles/Centrum Sentinel/199.txt","data/News Articles/Centrum Sentinel/203.txt","data/News Articles/Centrum Sentinel/208.txt","data/News Articles/Centrum Sentinel/232.txt","data/News Articles/Centrum Sentinel/280.txt","data/News Articles/Centrum Sentinel/299.txt","data/News Articles/Centrum Sentinel/308.txt","data/News Articles/Centrum Sentinel/320.txt","data/News Articles/Centrum Sentinel/325.txt","data/News Articles/Centrum Sentinel/386.txt","data/News Articles/Centrum Sentinel/418.txt","data/News Articles/Centrum Sentinel/434.txt","data/News Articles/Centrum Sentinel/485.txt","data/News Articles/Centrum Sentinel/486.txt","data/News Articles/Centrum Sentinel/490.txt","data/News Articles/Centrum Sentinel/521.txt","data/News Articles/Centrum Sentinel/551.txt","data/News Articles/Centrum Sentinel/56.txt","data/News Articles/Centrum Sentinel/562.txt","data/News Articles/Centrum Sentinel/597.txt","data/News Articles/Centrum Sentinel/624.txt","data/News Articles/Centrum Sentinel/649.txt","data/News Articles/Centrum Sentinel/655.txt","data/News Articles/Centrum Sentinel/665.txt","data/News Articles/Centrum Sentinel/708.txt","data/News Articles/Centrum Sentinel/717.txt","data/News Articles/Centrum Sentinel/749.txt","data/News Articles/Centrum Sentinel/793.txt","data/News Articles/Centrum Sentinel/817.txt","data/News Articles/Centrum Sentinel/828.txt","data/News Articles/Centrum Sentinel/841.txt","data/News Articles/Centrum Sentinel/844.txt","data/News Articles/Daily Pegasus/101.txt","data/News Articles/Daily Pegasus/115.txt","data/News Articles/Daily Pegasus/157.txt","data/News Articles/Daily Pegasus/175.txt","data/News Articles/Daily Pegasus/182.txt","data/News Articles/Daily Pegasus/22.txt","data/News Articles/Daily Pegasus/257.txt","data/News Articles/Daily Pegasus/264.txt","data/News Articles/Daily Pegasus/269.txt","data/News Articles/Daily Pegasus/272.txt","data/News Articles/Daily Pegasus/317.txt","data/News Articles/Daily Pegasus/465.txt","data/News Articles/Daily Pegasus/482.txt","data/News Articles/Daily Pegasus/51.txt","data/News Articles/Daily Pegasus/55.txt","data/News Articles/Daily Pegasus/568.txt","data/News Articles/Daily Pegasus/572.txt","data/News Articles/Daily Pegasus/602.txt","data/News Articles/Daily Pegasus/628.txt","data/News Articles/Daily Pegasus/647.txt","data/News Articles/Daily Pegasus/700.txt","data/News Articles/Daily Pegasus/72.txt","data/News Articles/Daily Pegasus/748.txt","data/News Articles/Daily Pegasus/760.txt","data/News Articles/Daily Pegasus/773.txt","data/News Articles/Daily Pegasus/791.txt","data/News Articles/Everyday News/147.txt","data/News Articles/Everyday News/2.txt","data/News Articles/Everyday News/200.txt","data/News Articles/Everyday News/201.txt","data/News Articles/Everyday News/214.txt","data/News Articles/Everyday News/234.txt","data/News Articles/Everyday News/332.txt","data/News Articles/Everyday News/343.txt","data/News Articles/Everyday News/387.txt","data/News Articles/Everyday News/460.txt","data/News Articles/Everyday News/496.txt","data/News Articles/Everyday News/608.txt","data/News Articles/Everyday News/656.txt","data/News Articles/Everyday News/80.txt","data/News Articles/Everyday News/93.txt","data/News Articles/Homeland Illumination/10.txt","data/News Articles/Homeland Illumination/110.txt","data/News Articles/Homeland Illumination/128.txt","data/News Articles/Homeland Illumination/134.txt","data/News Articles/Homeland Illumination/144.txt","data/News Articles/Homeland Illumination/161.txt","data/News Articles/Homeland Illumination/172.txt","data/News Articles/Homeland Illumination/18.txt","data/News Articles/Homeland Illumination/215.txt","data/News Articles/Homeland Illumination/221.txt","data/News Articles/Homeland Illumination/225.txt","data/News Articles/Homeland Illumination/254.txt","data/News Articles/Homeland Illumination/283.txt","data/News Articles/Homeland Illumination/290.txt","data/News Articles/Homeland Illumination/293.txt","data/News Articles/Homeland Illumination/294.txt","data/News Articles/Homeland Illumination/297.txt","data/News Articles/Homeland Illumination/313.txt","data/News Articles/Homeland Illumination/33.txt","data/News Articles/Homeland Illumination/348.txt","data/News Articles/Homeland Illumination/35.txt","data/News Articles/Homeland Illumination/350.txt","data/News Articles/Homeland Illumination/358.txt","data/News Articles/Homeland Illumination/366.txt","data/News Articles/Homeland Illumination/399.txt","data/News Articles/Homeland Illumination/407.txt","data/News Articles/Homeland Illumination/415.txt","data/News Articles/Homeland Illumination/426.txt","data/News Articles/Homeland Illumination/427.txt","data/News Articles/Homeland Illumination/437.txt","data/News Articles/Homeland Illumination/468.txt","data/News Articles/Homeland Illumination/470.txt","data/News Articles/Homeland Illumination/484.txt","data/News Articles/Homeland Illumination/502.txt","data/News Articles/Homeland Illumination/522.txt","data/News Articles/Homeland Illumination/537.txt","data/News Articles/Homeland Illumination/556.txt","data/News Articles/Homeland Illumination/563.txt","data/News Articles/Homeland Illumination/567.txt","data/News Articles/Homeland Illumination/579.txt","data/News Articles/Homeland Illumination/583.txt","data/News Articles/Homeland Illumination/592.txt","data/News Articles/Homeland Illumination/609.txt","data/News Articles/Homeland Illumination/616.txt","data/News Articles/Homeland Illumination/625.txt","data/News Articles/Homeland Illumination/627.txt","data/News Articles/Homeland Illumination/658.txt","data/News Articles/Homeland Illumination/669.txt","data/News Articles/Homeland Illumination/681.txt","data/News Articles/Homeland Illumination/684.txt","data/News Articles/Homeland Illumination/69.txt","data/News Articles/Homeland Illumination/697.txt","data/News Articles/Homeland Illumination/719.txt","data/News Articles/Homeland Illumination/73.txt","data/News Articles/Homeland Illumination/733.txt","data/News Articles/Homeland Illumination/737.txt","data/News Articles/Homeland Illumination/738.txt","data/News Articles/Homeland Illumination/743.txt","data/News Articles/Homeland Illumination/744.txt","data/News Articles/Homeland Illumination/770.txt","data/News Articles/Homeland Illumination/804.txt","data/News Articles/Homeland Illumination/842.txt","data/News Articles/Homeland Illumination/87.txt","data/News Articles/Homeland Illumination/94.txt","data/News Articles/International News/129.txt","data/News Articles/International News/226.txt","data/News Articles/International News/276.txt","data/News Articles/International News/29.txt","data/News Articles/International News/333.txt","data/News Articles/International News/374.txt","data/News Articles/International News/423.txt","data/News Articles/International News/436.txt","data/News Articles/International News/444.txt","data/News Articles/International News/499.txt","data/News Articles/International News/547.txt","data/News Articles/International News/636.txt","data/News Articles/International News/689.txt","data/News Articles/International News/742.txt","data/News Articles/International News/75.txt","data/News Articles/International News/767.txt","data/News Articles/International News/768.txt","data/News Articles/International News/821.txt","data/News Articles/International News/836.txt","data/News Articles/International News/89.txt","data/News Articles/International Times/150.txt","data/News Articles/International Times/167.txt","data/News Articles/International Times/238.txt","data/News Articles/International Times/24.txt","data/News Articles/International Times/282.txt","data/News Articles/International Times/287.txt","data/News Articles/International Times/347.txt","data/News Articles/International Times/443.txt","data/News Articles/International Times/506.txt","data/News Articles/International Times/514.txt","data/News Articles/International Times/550.txt","data/News Articles/International Times/638.txt","data/News Articles/International Times/651.txt","data/News Articles/International Times/751.txt","data/News Articles/Kronos Star/130.txt","data/News Articles/Kronos Star/163.txt","data/News Articles/Kronos Star/168.txt","data/News Articles/Kronos Star/174.txt","data/News Articles/Kronos Star/181.txt","data/News Articles/Kronos Star/246.txt","data/News Articles/Kronos Star/273.txt","data/News Articles/Kronos Star/28.txt","data/News Articles/Kronos Star/281.txt","data/News Articles/Kronos Star/289.txt","data/News Articles/Kronos Star/298.txt","data/News Articles/Kronos Star/306.txt","data/News Articles/Kronos Star/31.txt","data/News Articles/Kronos Star/321.txt","data/News Articles/Kronos Star/329.txt","data/News Articles/Kronos Star/339.txt","data/News Articles/Kronos Star/359.txt","data/News Articles/Kronos Star/364.txt","data/News Articles/Kronos Star/368.txt","data/News Articles/Kronos Star/376.txt","data/News Articles/Kronos Star/379.txt","data/News Articles/Kronos Star/38.txt","data/News Articles/Kronos Star/381.txt","data/News Articles/Kronos Star/39.txt","data/News Articles/Kronos Star/411.txt","data/News Articles/Kronos Star/42.txt","data/News Articles/Kronos Star/421.txt","data/News Articles/Kronos Star/435.txt","data/News Articles/Kronos Star/441.txt","data/News Articles/Kronos Star/461.txt","data/News Articles/Kronos Star/462.txt","data/News Articles/Kronos Star/481.txt","data/News Articles/Kronos Star/488.txt","data/News Articles/Kronos Star/495.txt","data/News Articles/Kronos Star/508.txt","data/News Articles/Kronos Star/518.txt","data/News Articles/Kronos Star/524.txt","data/News Articles/Kronos Star/526.txt","data/News Articles/Kronos Star/540.txt","data/News Articles/Kronos Star/541.txt","data/News Articles/Kronos Star/548.txt","data/News Articles/Kronos Star/569.txt","data/News Articles/Kronos Star/582.txt","data/News Articles/Kronos Star/623.txt","data/News Articles/Kronos Star/630.txt","data/News Articles/Kronos Star/637.txt","data/News Articles/Kronos Star/650.txt","data/News Articles/Kronos Star/666.txt","data/News Articles/Kronos Star/674.txt","data/News Articles/Kronos Star/678.txt","data/News Articles/Kronos Star/692.txt","data/News Articles/Kronos Star/693.txt","data/News Articles/Kronos Star/70.txt","data/News Articles/Kronos Star/710.txt","data/News Articles/Kronos Star/761.txt","data/News Articles/Kronos Star/763.txt","data/News Articles/Kronos Star/776.txt","data/News Articles/Kronos Star/781.txt","data/News Articles/Kronos Star/790.txt","data/News Articles/Kronos Star/820.txt","data/News Articles/Kronos Star/85.txt","data/News Articles/Kronos Star/9.txt","data/News Articles/Modern Rubicon/106.txt","data/News Articles/Modern Rubicon/133.txt","data/News Articles/Modern Rubicon/159.txt","data/News Articles/Modern Rubicon/171.txt","data/News Articles/Modern Rubicon/176.txt","data/News Articles/Modern Rubicon/21.txt","data/News Articles/Modern Rubicon/262.txt","data/News Articles/Modern Rubicon/30.txt","data/News Articles/Modern Rubicon/307.txt","data/News Articles/Modern Rubicon/355.txt","data/News Articles/Modern Rubicon/362.txt","data/News Articles/Modern Rubicon/365.txt","data/News Articles/Modern Rubicon/384.txt","data/News Articles/Modern Rubicon/412.txt","data/News Articles/Modern Rubicon/417.txt","data/News Articles/Modern Rubicon/425.txt","data/News Articles/Modern Rubicon/43.txt","data/News Articles/Modern Rubicon/452.txt","data/News Articles/Modern Rubicon/487.txt","data/News Articles/Modern Rubicon/642.txt","data/News Articles/Modern Rubicon/67.txt","data/News Articles/Modern Rubicon/727.txt","data/News Articles/Modern Rubicon/772.txt","data/News Articles/Modern Rubicon/783.txt","data/News Articles/Modern Rubicon/8.txt","data/News Articles/Modern Rubicon/811.txt","data/News Articles/Modern Rubicon/827.txt","data/News Articles/Modern Rubicon/830.txt","data/News Articles/Modern Rubicon/831.txt","data/News Articles/Modern Rubicon/99.txt","data/News Articles/News Desk/104.txt","data/News Articles/News Desk/146.txt","data/News Articles/News Desk/19.txt","data/News Articles/News Desk/190.txt","data/News Articles/News Desk/241.txt","data/News Articles/News Desk/259.txt","data/News Articles/News Desk/311.txt","data/News Articles/News Desk/402.txt","data/News Articles/News Desk/404.txt","data/News Articles/News Desk/464.txt","data/News Articles/News Desk/512.txt","data/News Articles/News Desk/525.txt","data/News Articles/News Desk/571.txt","data/News Articles/News Desk/588.txt","data/News Articles/News Desk/60.txt","data/News Articles/News Desk/605.txt","data/News Articles/News Desk/61.txt","data/News Articles/News Desk/644.txt","data/News Articles/News Desk/709.txt","data/News Articles/News Desk/721.txt","data/News Articles/News Desk/757.txt","data/News Articles/News Desk/801.txt","data/News Articles/News Desk/818.txt","data/News Articles/News Desk/839.txt","data/News Articles/News Desk/91.txt","data/News Articles/News Online Today/103.txt","data/News Articles/News Online Today/108.txt","data/News Articles/News Online Today/117.txt","data/News Articles/News Online Today/12.txt","data/News Articles/News Online Today/120.txt","data/News Articles/News Online Today/124.txt","data/News Articles/News Online Today/14.txt","data/News Articles/News Online Today/155.txt","data/News Articles/News Online Today/16.txt","data/News Articles/News Online Today/179.txt","data/News Articles/News Online Today/184.txt","data/News Articles/News Online Today/186.txt","data/News Articles/News Online Today/188.txt","data/News Articles/News Online Today/204.txt","data/News Articles/News Online Today/209.txt","data/News Articles/News Online Today/219.txt","data/News Articles/News Online Today/227.txt","data/News Articles/News Online Today/247.txt","data/News Articles/News Online Today/25.txt","data/News Articles/News Online Today/252.txt","data/News Articles/News Online Today/256.txt","data/News Articles/News Online Today/263.txt","data/News Articles/News Online Today/266.txt","data/News Articles/News Online Today/267.txt","data/News Articles/News Online Today/27.txt","data/News Articles/News Online Today/285.txt","data/News Articles/News Online Today/286.txt","data/News Articles/News Online Today/288.txt","data/News Articles/News Online Today/291.txt","data/News Articles/News Online Today/303.txt","data/News Articles/News Online Today/314.txt","data/News Articles/News Online Today/323.txt","data/News Articles/News Online Today/335.txt","data/News Articles/News Online Today/337.txt","data/News Articles/News Online Today/342.txt","data/News Articles/News Online Today/344.txt","data/News Articles/News Online Today/346.txt","data/News Articles/News Online Today/352.txt","data/News Articles/News Online Today/367.txt","data/News Articles/News Online Today/371.txt","data/News Articles/News Online Today/378.txt","data/News Articles/News Online Today/380.txt","data/News Articles/News Online Today/389.txt","data/News Articles/News Online Today/4.txt","data/News Articles/News Online Today/40.txt","data/News Articles/News Online Today/410.txt","data/News Articles/News Online Today/413.txt","data/News Articles/News Online Today/414.txt","data/News Articles/News Online Today/416.txt","data/News Articles/News Online Today/431.txt","data/News Articles/News Online Today/440.txt","data/News Articles/News Online Today/446.txt","data/News Articles/News Online Today/447.txt","data/News Articles/News Online Today/45.txt","data/News Articles/News Online Today/451.txt","data/News Articles/News Online Today/454.txt","data/News Articles/News Online Today/46.txt","data/News Articles/News Online Today/467.txt","data/News Articles/News Online Today/476.txt","data/News Articles/News Online Today/483.txt","data/News Articles/News Online Today/489.txt","data/News Articles/News Online Today/505.txt","data/News Articles/News Online Today/511.txt","data/News Articles/News Online Today/52.txt","data/News Articles/News Online Today/534.txt","data/News Articles/News Online Today/542.txt","data/News Articles/News Online Today/544.txt","data/News Articles/News Online Today/545.txt","data/News Articles/News Online Today/549.txt","data/News Articles/News Online Today/566.txt","data/News Articles/News Online Today/57.txt","data/News Articles/News Online Today/570.txt","data/News Articles/News Online Today/574.txt","data/News Articles/News Online Today/577.txt","data/News Articles/News Online Today/590.txt","data/News Articles/News Online Today/596.txt","data/News Articles/News Online Today/598.txt","data/News Articles/News Online Today/606.txt","data/News Articles/News Online Today/63.txt","data/News Articles/News Online Today/631.txt","data/News Articles/News Online Today/633.txt","data/News Articles/News Online Today/634.txt","data/News Articles/News Online Today/639.txt","data/News Articles/News Online Today/640.txt","data/News Articles/News Online Today/65.txt","data/News Articles/News Online Today/657.txt","data/News Articles/News Online Today/676.txt","data/News Articles/News Online Today/68.txt","data/News Articles/News Online Today/688.txt","data/News Articles/News Online Today/690.txt","data/News Articles/News Online Today/7.txt","data/News Articles/News Online Today/702.txt","data/News Articles/News Online Today/707.txt","data/News Articles/News Online Today/71.txt","data/News Articles/News Online Today/711.txt","data/News Articles/News Online Today/722.txt","data/News Articles/News Online Today/746.txt","data/News Articles/News Online Today/766.txt","data/News Articles/News Online Today/777.txt","data/News Articles/News Online Today/779.txt","data/News Articles/News Online Today/785.txt","data/News Articles/News Online Today/786.txt","data/News Articles/News Online Today/789.txt","data/News Articles/News Online Today/79.txt","data/News Articles/News Online Today/797.txt","data/News Articles/News Online Today/819.txt","data/News Articles/News Online Today/82.txt","data/News Articles/News Online Today/833.txt","data/News Articles/News Online Today/86.txt","data/News Articles/News Online Today/95.txt","data/News Articles/News Online Today/98.txt","data/News Articles/Tethys News/11.txt","data/News Articles/Tethys News/122.txt","data/News Articles/Tethys News/173.txt","data/News Articles/Tethys News/193.txt","data/News Articles/Tethys News/253.txt","data/News Articles/Tethys News/26.txt","data/News Articles/Tethys News/32.txt","data/News Articles/Tethys News/392.txt","data/News Articles/Tethys News/395.txt","data/News Articles/Tethys News/400.txt","data/News Articles/Tethys News/419.txt","data/News Articles/Tethys News/430.txt","data/News Articles/Tethys News/44.txt","data/News Articles/Tethys News/453.txt","data/News Articles/Tethys News/507.txt","data/News Articles/Tethys News/510.txt","data/News Articles/Tethys News/532.txt","data/News Articles/Tethys News/533.txt","data/News Articles/Tethys News/539.txt","data/News Articles/Tethys News/558.txt","data/News Articles/Tethys News/585.txt","data/News Articles/Tethys News/600.txt","data/News Articles/Tethys News/613.txt","data/News Articles/Tethys News/635.txt","data/News Articles/Tethys News/653.txt","data/News Articles/Tethys News/685.txt","data/News Articles/Tethys News/726.txt","data/News Articles/Tethys News/759.txt","data/News Articles/Tethys News/76.txt","data/News Articles/Tethys News/78.txt","data/News Articles/Tethys News/813.txt","data/News Articles/Tethys News/829.txt","data/News Articles/Tethys News/838.txt","data/News Articles/Tethys News/90.txt","data/News Articles/Tethys News/92.txt","data/News Articles/The Abila Post/139.txt","data/News Articles/The Abila Post/169.txt","data/News Articles/The Abila Post/185.txt","data/News Articles/The Abila Post/212.txt","data/News Articles/The Abila Post/218.txt","data/News Articles/The Abila Post/233.txt","data/News Articles/The Abila Post/250.txt","data/News Articles/The Abila Post/261.txt","data/News Articles/The Abila Post/265.txt","data/News Articles/The Abila Post/292.txt","data/News Articles/The Abila Post/304.txt","data/News Articles/The Abila Post/322.txt","data/News Articles/The Abila Post/326.txt","data/News Articles/The Abila Post/338.txt","data/News Articles/The Abila Post/356.txt","data/News Articles/The Abila Post/369.txt","data/News Articles/The Abila Post/398.txt","data/News Articles/The Abila Post/428.txt","data/News Articles/The Abila Post/429.txt","data/News Articles/The Abila Post/438.txt","data/News Articles/The Abila Post/439.txt","data/News Articles/The Abila Post/450.txt","data/News Articles/The Abila Post/458.txt","data/News Articles/The Abila Post/475.txt","data/News Articles/The Abila Post/477.txt","data/News Articles/The Abila Post/50.txt","data/News Articles/The Abila Post/528.txt","data/News Articles/The Abila Post/53.txt","data/News Articles/The Abila Post/54.txt","data/News Articles/The Abila Post/555.txt","data/News Articles/The Abila Post/557.txt","data/News Articles/The Abila Post/573.txt","data/News Articles/The Abila Post/576.txt","data/News Articles/The Abila Post/619.txt","data/News Articles/The Abila Post/654.txt","data/News Articles/The Abila Post/660.txt","data/News Articles/The Abila Post/663.txt","data/News Articles/The Abila Post/677.txt","data/News Articles/The Abila Post/682.txt","data/News Articles/The Abila Post/696.txt","data/News Articles/The Abila Post/699.txt","data/News Articles/The Abila Post/705.txt","data/News Articles/The Abila Post/713.txt","data/News Articles/The Abila Post/718.txt","data/News Articles/The Abila Post/756.txt","data/News Articles/The Abila Post/764.txt","data/News Articles/The Abila Post/782.txt","data/News Articles/The Abila Post/803.txt","data/News Articles/The Abila Post/805.txt","data/News Articles/The Abila Post/806.txt","data/News Articles/The Abila Post/807.txt","data/News Articles/The Abila Post/812.txt","data/News Articles/The Abila Post/83.txt","data/News Articles/The Abila Post/834.txt","data/News Articles/The Continent/100.txt","data/News Articles/The Continent/242.txt","data/News Articles/The Continent/245.txt","data/News Articles/The Continent/268.txt","data/News Articles/The Continent/302.txt","data/News Articles/The Continent/318.txt","data/News Articles/The Continent/36.txt","data/News Articles/The Continent/457.txt","data/News Articles/The Continent/513.txt","data/News Articles/The Continent/530.txt","data/News Articles/The Continent/535.txt","data/News Articles/The Continent/580.txt","data/News Articles/The Continent/784.txt","data/News Articles/The Continent/796.txt","data/News Articles/The Continent/88.txt","data/News Articles/The Explainer/127.txt","data/News Articles/The Explainer/177.txt","data/News Articles/The Explainer/197.txt","data/News Articles/The Explainer/205.txt","data/News Articles/The Explainer/258.txt","data/News Articles/The Explainer/260.txt","data/News Articles/The Explainer/300.txt","data/News Articles/The Explainer/324.txt","data/News Articles/The Explainer/334.txt","data/News Articles/The Explainer/340.txt","data/News Articles/The Explainer/377.txt","data/News Articles/The Explainer/382.txt","data/News Articles/The Explainer/385.txt","data/News Articles/The Explainer/397.txt","data/News Articles/The Explainer/442.txt","data/News Articles/The Explainer/491.txt","data/News Articles/The Explainer/527.txt","data/News Articles/The Explainer/661.txt","data/News Articles/The Explainer/667.txt","data/News Articles/The Explainer/679.txt","data/News Articles/The Explainer/691.txt","data/News Articles/The Explainer/703.txt","data/News Articles/The Explainer/715.txt","data/News Articles/The Explainer/731.txt","data/News Articles/The Explainer/747.txt","data/News Articles/The General Post/107.txt","data/News Articles/The General Post/131.txt","data/News Articles/The General Post/192.txt","data/News Articles/The General Post/223.txt","data/News Articles/The General Post/23.txt","data/News Articles/The General Post/235.txt","data/News Articles/The General Post/284.txt","data/News Articles/The General Post/316.txt","data/News Articles/The General Post/336.txt","data/News Articles/The General Post/345.txt","data/News Articles/The General Post/478.txt","data/News Articles/The General Post/493.txt","data/News Articles/The General Post/536.txt","data/News Articles/The General Post/543.txt","data/News Articles/The General Post/723.txt","data/News Articles/The General Post/825.txt","data/News Articles/The General Post/826.txt","data/News Articles/The General Post/835.txt","data/News Articles/The General Post/97.txt","data/News Articles/The Guide/145.txt","data/News Articles/The Guide/162.txt","data/News Articles/The Guide/189.txt","data/News Articles/The Guide/194.txt","data/News Articles/The Guide/224.txt","data/News Articles/The Guide/229.txt","data/News Articles/The Guide/296.txt","data/News Articles/The Guide/327.txt","data/News Articles/The Guide/328.txt","data/News Articles/The Guide/330.txt","data/News Articles/The Guide/363.txt","data/News Articles/The Guide/372.txt","data/News Articles/The Guide/373.txt","data/News Articles/The Guide/388.txt","data/News Articles/The Guide/424.txt","data/News Articles/The Guide/47.txt","data/News Articles/The Guide/509.txt","data/News Articles/The Guide/595.txt","data/News Articles/The Guide/614.txt","data/News Articles/The Guide/62.txt","data/News Articles/The Guide/641.txt","data/News Articles/The Guide/66.txt","data/News Articles/The Guide/664.txt","data/News Articles/The Guide/670.txt","data/News Articles/The Guide/725.txt","data/News Articles/The Guide/754.txt","data/News Articles/The Guide/758.txt","data/News Articles/The Guide/837.txt","data/News Articles/The Light of Truth/1.txt","data/News Articles/The Light of Truth/102.txt","data/News Articles/The Light of Truth/164.txt","data/News Articles/The Light of Truth/198.txt","data/News Articles/The Light of Truth/216.txt","data/News Articles/The Light of Truth/277.txt","data/News Articles/The Light of Truth/301.txt","data/News Articles/The Light of Truth/432.txt","data/News Articles/The Light of Truth/456.txt","data/News Articles/The Light of Truth/494.txt","data/News Articles/The Light of Truth/503.txt","data/News Articles/The Light of Truth/560.txt","data/News Articles/The Light of Truth/671.txt","data/News Articles/The Light of Truth/675.txt","data/News Articles/The Light of Truth/706.txt","data/News Articles/The Light of Truth/729.txt","data/News Articles/The Light of Truth/802.txt","data/News Articles/The Light of Truth/822.txt","data/News Articles/The Light of Truth/823.txt","data/News Articles/The Orb/0.txt","data/News Articles/The Orb/109.txt","data/News Articles/The Orb/148.txt","data/News Articles/The Orb/210.txt","data/News Articles/The Orb/211.txt","data/News Articles/The Orb/222.txt","data/News Articles/The Orb/239.txt","data/News Articles/The Orb/248.txt","data/News Articles/The Orb/249.txt","data/News Articles/The Orb/275.txt","data/News Articles/The Orb/357.txt","data/News Articles/The Orb/390.txt","data/News Articles/The Orb/455.txt","data/News Articles/The Orb/459.txt","data/News Articles/The Orb/523.txt","data/News Articles/The Orb/531.txt","data/News Articles/The Orb/546.txt","data/News Articles/The Orb/575.txt","data/News Articles/The Orb/622.txt","data/News Articles/The Orb/662.txt","data/News Articles/The Orb/672.txt","data/News Articles/The Orb/735.txt","data/News Articles/The Orb/741.txt","data/News Articles/The Orb/778.txt","data/News Articles/The Orb/832.txt","data/News Articles/The Orb/840.txt","data/News Articles/The Truth/112.txt","data/News Articles/The Truth/156.txt","data/News Articles/The Truth/165.txt","data/News Articles/The Truth/166.txt","data/News Articles/The Truth/20.txt","data/News Articles/The Truth/230.txt","data/News Articles/The Truth/240.txt","data/News Articles/The Truth/361.txt","data/News Articles/The Truth/394.txt","data/News Articles/The Truth/406.txt","data/News Articles/The Truth/41.txt","data/News Articles/The Truth/463.txt","data/News Articles/The Truth/474.txt","data/News Articles/The Truth/480.txt","data/News Articles/The Truth/552.txt","data/News Articles/The Truth/561.txt","data/News Articles/The Truth/581.txt","data/News Articles/The Truth/584.txt","data/News Articles/The Truth/599.txt","data/News Articles/The Truth/607.txt","data/News Articles/The Truth/621.txt","data/News Articles/The Truth/632.txt","data/News Articles/The Truth/645.txt","data/News Articles/The Truth/668.txt","data/News Articles/The Truth/724.txt","data/News Articles/The Truth/794.txt","data/News Articles/The Truth/795.txt","data/News Articles/The Truth/96.txt","data/News Articles/The Tulip/119.txt","data/News Articles/The Tulip/178.txt","data/News Articles/The Tulip/206.txt","data/News Articles/The Tulip/3.txt","data/News Articles/The Tulip/315.txt","data/News Articles/The Tulip/319.txt","data/News Articles/The Tulip/331.txt","data/News Articles/The Tulip/360.txt","data/News Articles/The Tulip/370.txt","data/News Articles/The Tulip/479.txt","data/News Articles/The Tulip/504.txt","data/News Articles/The Tulip/515.txt","data/News Articles/The Tulip/529.txt","data/News Articles/The Tulip/586.txt","data/News Articles/The Tulip/686.txt","data/News Articles/The Tulip/695.txt","data/News Articles/The Tulip/712.txt","data/News Articles/The Tulip/720.txt","data/News Articles/The Tulip/810.txt","data/News Articles/The World/111.txt","data/News Articles/The World/195.txt","data/News Articles/The World/278.txt","data/News Articles/The World/305.txt","data/News Articles/The World/472.txt","data/News Articles/The World/49.txt","data/News Articles/The World/497.txt","data/News Articles/The World/498.txt","data/News Articles/The World/517.txt","data/News Articles/The World/559.txt","data/News Articles/The World/587.txt","data/News Articles/The World/611.txt","data/News Articles/The World/736.txt","data/News Articles/The World/750.txt","data/News Articles/The World/809.txt","data/News Articles/The World/824.txt","data/News Articles/The World/84.txt","data/News Articles/The Wrap/116.txt","data/News Articles/The Wrap/158.txt","data/News Articles/The Wrap/17.txt","data/News Articles/The Wrap/183.txt","data/News Articles/The Wrap/187.txt","data/News Articles/The Wrap/207.txt","data/News Articles/The Wrap/217.txt","data/News Articles/The Wrap/236.txt","data/News Articles/The Wrap/243.txt","data/News Articles/The Wrap/271.txt","data/News Articles/The Wrap/349.txt","data/News Articles/The Wrap/408.txt","data/News Articles/The Wrap/409.txt","data/News Articles/The Wrap/445.txt","data/News Articles/The Wrap/448.txt","data/News Articles/The Wrap/492.txt","data/News Articles/The Wrap/500.txt","data/News Articles/The Wrap/520.txt","data/News Articles/The Wrap/680.txt","data/News Articles/The Wrap/704.txt","data/News Articles/The Wrap/740.txt","data/News Articles/The Wrap/769.txt","data/News Articles/The Wrap/788.txt","data/News Articles/The Wrap/799.txt","data/News Articles/The Wrap/814.txt","data/News Articles/The Wrap/843.txt","data/News Articles/Who What News/105.txt","data/News Articles/Who What News/137.txt","data/News Articles/Who What News/153.txt","data/News Articles/Who What News/310.txt","data/News Articles/Who What News/375.txt","data/News Articles/Who What News/422.txt","data/News Articles/Who What News/449.txt","data/News Articles/Who What News/469.txt","data/News Articles/Who What News/471.txt","data/News Articles/Who What News/473.txt","data/News Articles/Who What News/59.txt","data/News Articles/Who What News/626.txt","data/News Articles/Who What News/694.txt","data/News Articles/Who What News/716.txt","data/News Articles/Who What News/732.txt","data/News Articles/World Journal/126.txt","data/News Articles/World Journal/149.txt","data/News Articles/World Journal/180.txt","data/News Articles/World Journal/279.txt","data/News Articles/World Journal/351.txt","data/News Articles/World Journal/396.txt","data/News Articles/World Journal/501.txt","data/News Articles/World Journal/6.txt","data/News Articles/World Journal/646.txt","data/News Articles/World Journal/648.txt","data/News Articles/World Journal/687.txt","data/News Articles/World Journal/701.txt","data/News Articles/World Journal/739.txt","data/News Articles/World Journal/771.txt","data/News Articles/World Journal/81.txt","data/News Articles/World Source/132.txt","data/News Articles/World Source/353.txt","data/News Articles/World Source/393.txt","data/News Articles/World Source/564.txt","data/News Articles/World Source/643.txt","data/News Articles/World Source/728.txt","data/News Articles/World Source/762.txt","data/News Articles/World Source/775.txt","data/News Articles/World Source/787.txt","data/News Articles/Worldwise/114.txt","data/News Articles/Worldwise/143.txt","data/News Articles/Worldwise/196.txt","data/News Articles/Worldwise/228.txt","data/News Articles/Worldwise/274.txt","data/News Articles/Worldwise/309.txt","data/News Articles/Worldwise/312.txt","data/News Articles/Worldwise/5.txt","data/News Articles/Worldwise/538.txt","data/News Articles/Worldwise/553.txt","data/News Articles/Worldwise/58.txt","data/News Articles/Worldwise/589.txt","data/News Articles/Worldwise/591.txt","data/News Articles/Worldwise/593.txt","data/News Articles/Worldwise/594.txt","data/News Articles/Worldwise/620.txt","data/News Articles/Worldwise/629.txt","data/News Articles/Worldwise/659.txt","data/News Articles/Worldwise/730.txt","data/News Articles/Worldwise/752.txt","data/News Articles/Worldwise/755.txt","data/News Articles/Worldwise/765.txt","data/News Articles/Worldwise/774.txt","data/News Articles/Worldwise/780.txt","data/News Articles/Worldwise/792.txt","data/News Articles/Worldwise/808.txt","data/News Articles/Worldwise/815.txt","data/News Articles/Worldwise/816.txt","data/resumes/Bio-Ada Campo.docx","data/resumes/Bio-Ingrid Barranco.docx","data/resumes/Bio-OrhanStrum.docx","data/resumes/Bio-Sten SanjorgeJr.docx","data/resumes/Bio-Willem Vasco.docx","data/resumes/Resume-AdanMorlun.docx","data/resumes/Resume-AlbinaHafon.docx","data/resumes/Resume-AndaRibera.docx","data/resumes/Resume-AxelCalzas.docx","data/resumes/Resume-BertrandOvan.docx","data/resumes/Resume-CarlaForluniau.docx","data/resumes/Resume-ClaudioHawelon.docx","data/resumes/Resume-CorneliaLais.docx","data/resumes/Resume-DanteCoginian.docx","data/resumes/Resume-ElsaOrilla.docx","data/resumes/Resume-EmileArpa.docx","data/resumes/Resume-FelixBalas.docx","data/resumes/Resume-FelixResumir.docx","data/resumes/Resume-HidekiCocinaro.docx","data/resumes/Resume-IreneNant.docx","data/resumes/Resume-IsakBaza.docx","data/resumes/Resume-IsandeBorrasca.docx","data/resumes/Resume-IsiaVann.docx","data/resumes/Resume-LarsAzada.docx","data/resumes/Resume-LidelseDedos.docx","data/resumes/Resume-LindaLagos.docx","data/resumes/Resume-LinneaBergen.docx","data/resumes/Resume-LoretoBodrogi.docx","data/resumes/Resume-LucasAlcazar.docx","data/resumes/Resume-MarinOnda.docx","data/resumes/Resume-MinkeMies.docx","data/resumes/Resume-NilsCalixto.docx","data/resumes/Resume-RachelPantanal.docx","data/resumes/Resume-StenigFusil.docx","data/resumes/Resume-SvenFlecha.docx","english-ewt-ud-2.5-191206.udpipe","img/citizenship.JPG","img/citizenship2.JPG","img/clusters.JPG","img/emailnetwork1.JPG","img/keywords.JPG","img/lit-articles.JPG","img/lit-graph.JPG","img/lit-timeline.JPG","img/lit-toomuch.JPG","img/textNet.JPG","img/textplot1.JPG","img/textplot2.JPG","img/textPlotC1.JPG","img/textPlotC2.JPG","img/textPlotC3.JPG","img/textPlotC4.JPG","img/textPlotC5.JPG","img/textPlotC6.JPG","img/timeline.JPG","img/wordcloud.JPG","visual-assignment_files/anchor-4.2.2/anchor.min.js","visual-assignment_files/bowser-1.9.3/bowser.min.js","visual-assignment_files/crosstalk-1.1.0.1/css/crosstalk.css","visual-assignment_files/crosstalk-1.1.0.1/js/crosstalk.js","visual-assignment_files/crosstalk-1.1.0.1/js/crosstalk.js.map","visual-assignment_files/crosstalk-1.1.0.1/js/crosstalk.min.js","visual-assignment_files/crosstalk-1.1.0.1/js/crosstalk.min.js.map","visual-assignment_files/d3-4.5.0/d3.min.js","visual-assignment_files/d3-4.5.0/LICENSE","visual-assignment_files/datatables-binding-0.15/datatables.js","visual-assignment_files/datatables-css-0.0.0/datatables-crosstalk.css","visual-assignment_files/distill-2.2.21/template.v2.js","visual-assignment_files/dt-core-1.10.20/css/jquery.dataTables.extra.css","visual-assignment_files/dt-core-1.10.20/css/jquery.dataTables.min.css","visual-assignment_files/dt-core-1.10.20/js/jquery.dataTables.min.js","visual-assignment_files/figure-html5/unnamed-chunk-38-1.png","visual-assignment_files/figure-html5/unnamed-chunk-40-1.png","visual-assignment_files/figure-html5/unnamed-chunk-41-1.png","visual-assignment_files/figure-html5/unnamed-chunk-42-1.png","visual-assignment_files/figure-html5/unnamed-chunk-43-1.png","visual-assignment_files/figure-html5/unnamed-chunk-44-1.png","visual-assignment_files/figure-html5/unnamed-chunk-45-1.png","visual-assignment_files/figure-html5/unnamed-chunk-46-1.png","visual-assignment_files/figure-html5/unnamed-chunk-47-1.png","visual-assignment_files/figure-html5/unnamed-chunk-48-1.png","visual-assignment_files/figure-html5/unnamed-chunk-49-1.png","visual-assignment_files/figure-html5/unnamed-chunk-50-1.png","visual-assignment_files/figure-html5/unnamed-chunk-51-1.png","visual-assignment_files/figure-html5/unnamed-chunk-52-1.png","visual-assignment_files/figure-html5/unnamed-chunk-53-1.png","visual-assignment_files/figure-html5/unnamed-chunk-54-1.png","visual-assignment_files/figure-html5/unnamed-chunk-55-1.png","visual-assignment_files/figure-html5/unnamed-chunk-56-1.png","visual-assignment_files/figure-html5/unnamed-chunk-57-1.png","visual-assignment_files/figure-html5/unnamed-chunk-61-1.png","visual-assignment_files/figure-html5/unnamed-chunk-62-1.png","visual-assignment_files/figure-html5/unnamed-chunk-63-1.png","visual-assignment_files/figure-html5/unnamed-chunk-64-1.png","visual-assignment_files/figure-html5/unnamed-chunk-65-1.png","visual-assignment_files/figure-html5/unnamed-chunk-66-1.png","visual-assignment_files/figure-html5/unnamed-chunk-67-1.png","visual-assignment_files/figure-html5/unnamed-chunk-68-1.png","visual-assignment_files/figure-html5/unnamed-chunk-70-1.png","visual-assignment_files/figure-html5/unnamed-chunk-71-1.png","visual-assignment_files/figure-html5/unnamed-chunk-72-1.png","visual-assignment_files/figure-html5/unnamed-chunk-73-1.png","visual-assignment_files/figure-html5/unnamed-chunk-74-1.png","visual-assignment_files/figure-html5/unnamed-chunk-75-1.png","visual-assignment_files/figure-html5/unnamed-chunk-76-1.png","visual-assignment_files/figure-html5/unnamed-chunk-77-1.png","visual-assignment_files/figure-html5/unnamed-chunk-78-1.png","visual-assignment_files/figure-html5/unnamed-chunk-79-1.png","visual-assignment_files/figure-html5/unnamed-chunk-80-1.png","visual-assignment_files/figure-html5/unnamed-chunk-81-1.png","visual-assignment_files/figure-html5/unnamed-chunk-82-1.png","visual-assignment_files/figure-html5/unnamed-chunk-83-1.png","visual-assignment_files/forceNetwork-binding-0.4/forceNetwork.js","visual-assignment_files/htmlwidgets-1.5.1/htmlwidgets.js","visual-assignment_files/jquery-1.11.3/jquery.min.js","visual-assignment_files/jquery-1.12.4/jquery.min.js","visual-assignment_files/jquery-1.12.4/LICENSE.txt","visual-assignment_files/nouislider-7.0.10/jquery.nouislider.min.css","visual-assignment_files/nouislider-7.0.10/jquery.nouislider.min.js","visual-assignment_files/popper-2.6.0/popper.min.js","visual-assignment_files/selectize-0.12.0/selectize.bootstrap3.css","visual-assignment_files/selectize-0.12.0/selectize.min.js","visual-assignment_files/tippy-6.2.7/tippy-bundle.umd.min.js","visual-assignment_files/tippy-6.2.7/tippy-light-border.css","visual-assignment_files/tippy-6.2.7/tippy.css","visual-assignment_files/tippy-6.2.7/tippy.umd.min.js","visual-assignment_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
  <script src="../../site_libs/d3-4.5.0/d3.min.js"></script>
  <script src="../../site_libs/forceNetwork-binding-0.4/forceNetwork.js"></script>
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"visual-assignment","description":"A short description of the post.","authors":[{"author":"Nikitha Banda","authorURL":"https://www.linkedin.com/in/banda-nikitha","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-07-10T00:00:00.000+08:00","citationText":"Banda, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">IDEA</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="../../about.html">About</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>visual-assignment</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>A short description of the post.</p></p>
</div>

<div class="d-byline">
  Nikitha Banda <a href="https://www.linkedin.com/in/banda-nikitha" class="uri">https://www.linkedin.com/in/banda-nikitha</a> 
  
<br/>07-10-2021
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#background-literature-review">1.0 Background &amp; Literature Review</a><ul>
<li><a href="#backgroung">1.1 Backgroung</a></li>
<li><a href="#literature-review-of-2014-vast-challenge">1.2 Literature Review of 2014 VAST Challenge</a></li>
</ul></li>
<li><a href="#data-preparation">2.0 Data Preparation</a><ul>
<li><a href="#installing-and-loading-necessary-packages">1) Installing and Loading Necessary Packages</a></li>
<li><a href="#importing-provided-data">2) Importing Provided Data</a></li>
<li><a href="#processing-news-articles">3) Processing News Articles</a></li>
<li><a href="#processing-email-and-employee-data">4) Processing Email and Employee Data</a></li>
<li><a href="#storing-clean-data-into-files">4 Storing clean data into files</a></li>
</ul></li>
<li><a href="#building-the-visualization">3.0 Building the Visualization</a><ul>
<li><a href="#relationship-between-the-news-articles">2) Relationship between the News Articles</a></li>
<li><a href="#visualizing-email-network">3) Visualizing Email Network</a></li>
</ul></li>
<li><a href="#response-to-questions">4.0 Response to Questions</a><ul>
<li><a href="#characterization-of-any-biases-identified-in-the-news-sources">4.2 Characterization of any biases identified in the news sources</a></li>
<li><a href="#exploring-relationships">4.3 Exploring Relationships</a></li>
</ul></li>
<li><a href="#storyboard-for-r-shiny">5.0 Storyboard for R-Shiny</a></li>
</ul>
</nav>
</div>
<h2 id="background-literature-review">1.0 Background &amp; Literature Review</h2>
<h3 id="backgroung">1.1 Backgroung</h3>
<p>This visual investigation is based on <a href="https://vast-challenge.github.io/2021/MC1.html">VAST Challenge 2021 - The Kronos Incident Mini Challenge 1</a>. The overview of the challenge is as below:</p>
<p>"In the roughly twenty years that Tethys-based GAStech has been operating a natural gas production site in the island country of Kronos, it has produced remarkable profits and developed strong relationships with the government of Kronos. However, GAStech has not been as successful in demonstrating environmental stewardship.</p>
<p>In January, 2014, the leaders of GAStech are celebrating their new-found fortune as a result of the initial public offering of their very successful company. In the midst of this celebration, several employees of GAStech go missing. An organization known as the Protectors of Kronos (POK) is suspected in the disappearance, but things may not be what they seem."</p>
<p><strong>Mini-Challenge 1</strong> looks at the relationships and conditions that led up to the kidnapping. As an analyst, you have a set of current and historical news reports at your disposal, as well as resumes of numerous GAStech employees and email headers from two weeks of internal GAStech company email. Can you identify the complex relationships among all of these people and organizations?</p>
<p><strong>Questions</strong></p>
<ol type="1">
<li><p>Characterize the news data sources provided. Which are primary sources and which are derivative sources? What are the relationships between the primary and derivative sources?</p></li>
<li><p>Characterize any biases you identify in these news sources, with respect to their representation of specific people, places, and events. Give examples.</p></li>
<li><p>Given the data sources provided, use visual analytics to identify potential official and unofficial relationships among GASTech, POK, the APA, and Government. Include both personal relationships and shared goals and objectives. Provide evidence for these relationships.</p></li>
</ol>
<h3 id="literature-review-of-2014-vast-challenge">1.2 Literature Review of 2014 VAST Challenge</h3>
<p>The 2021 IEEE VAST Challenge is a variation on a 2014 year’s challenge with modified data and new questions. So this literature review is based on some of the submissions from that year.</p>
<p><strong>1) Timeline Visualizations</strong></p>
<p><img src="img/lit-timeline.JPG" style="width:70.0%" /></p>
<p>From the images above, the timeline in <a href="http://visualdata.wustl.edu/varepository/VAST%20Challenge%202014/challenges/MC1%20-%20Disappearance%20at%20GASTech/entries/Peking%20University/">figure ‘a’</a> consists of too much text and appears to be very cluttered. When any graph is built, one must work on showing what is required and what is not. Putting in the whole text for every event makes it difficult for the user to identify the important aspects and also it is not very readable. The graph also seems a little inconsistent as a few of the vertical lines are dotted and some are not. There should have been a legend to show the differences.</p>
<p>Coming to timeline shown in <a href="http://visualdata.wustl.edu/varepository/VAST%20Challenge%202014/challenges/MC1%20-%20Disappearance%20at%20GASTech/entries/Tianjin%20University%20-%20Cai/">figure ‘b’</a>, even thought the plot is not cluttered, the circled numbers of events not being attached to the vertical lines makes it difficult to understand at what time instance the event falls under.</p>
<p><strong>2) Text Visualization</strong></p>
<p><img src="img/lit-articles.JPG" style="width:70.0%" /></p>
<p>In the <a href="http://visualdata.wustl.edu/varepository/VAST%20Challenge%202014/challenges/MC1%20-%20Disappearance%20at%20GASTech/entries/Peking%20University/">figure</a> above ,users are provided with text across various articles to compare. This makes it very difficult for a user to interpret the main aspects across all the articles. Instead of showcasing the whole text in the articles, the user could have been provided an option to select the articles he wants to compare and the visualization of these articles can be in the form of wordcloud which makes it more easy to look at the most important terms used.</p>
<p>Also if there are more articles to be included to the dataset, then the number of articles shown to the user would also increase making it all the more cluttered then it already is. Therefore, giving the option to the user to select the articles he wants to view and compare with would be a more ideal solution.</p>
<p><strong>3) How Much is Too Much</strong></p>
<p><img src="img/lit-toomuch.JPG" style="width:90.0%" /></p>
<p><a href="http://visualdata.wustl.edu/varepository/VAST%20Challenge%202014/challenges/MC1%20-%20Disappearance%20at%20GASTech/entries/Tianjin%20University%20-%20Gao/">Screen shot ‘a’</a> of a visualization dashboard shown above consists of 3 different plots that contain too much of data making it difficult to view the wordings. When showcasing multiple plots in one page, it is better to use a subset of the data to visualize because by doing so, the amount of data to visualize would decrease and this makes the plots more readable. One way in which this approach can be achieved by clustering the data and then provide the use an option to select the cluster he wants to visualize.</p>
<p>The same applies for the second <a href="http://visualdata.wustl.edu/varepository/VAST%20Challenge%202014/challenges/MC1%20-%20Disappearance%20at%20GASTech/entries/Peking%20University/">figure ‘b’</a>. Here, the user is given an option to select a user from a dropdow. However, the comparisons performed with the selected user are too many and the plot appears to be very cluttered making it difficult to read the wordings. Similar to what was suggested earlier, considering clustering the data will help reduce the clutter.</p>
<p><strong>4) Network Graph</strong></p>
<p><img src="img/lit-graph.JPG" style="width:70.0%" /></p>
<p>The network <a href="http://visualdata.wustl.edu/varepository/VAST%20Challenge%202014/challenges/MC1%20-%20Disappearance%20at%20GASTech/entries/Peking%20University/">graph</a> above, consists of many nodes and due to the overlap of the node names with the edges, some of the text is difficult to read. An alternat approact would e to divide the network graph into sub graphs. When the graph is divided, it makes the graphs less dense and also enhances the redability.</p>
<h2 id="data-preparation">2.0 Data Preparation</h2>
<h3 id="installing-and-loading-necessary-packages">1) Installing and Loading Necessary Packages</h3>
<p>As part of the data processing, we first start with installing the required packages if they are not already installed and calling the libraries. The below chunk of code will handle all the necessary packages required without one needing to install manually. The required packages will only have to be mentioned in the ‘packages’ list. The purpose of requiring the below packages are:</p>
<ul>
<li><p>tidyverse - Majority of the data cleaning function such as ‘read_csv’, ‘startWith’, ‘gsub’ etc all belong in this library.</p></li>
<li><p>DT - To display the data frame in an interactive manner to the user.</p></li>
<li><p>mgsub - This is similar to the use of ‘gsub’ but can specify more than 1 string pattern.</p></li>
<li><p>readxl - To read “.xlxs” or “.xls” files.</p></li>
<li><p>splitstackshape - The function ‘concat.split.multiple’ that is present in this package is used to split a string into multiple rows.</p></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>packages</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'tidyverse'</span>,<span class='st'>'DT'</span>,<span class='st'>'mgsub'</span>,<span class='st'>'readxl'</span>,<span class='st'>'splitstackshape'</span><span class='op'>)</span>
<span class='kw'>for</span><span class='op'>(</span><span class='va'>p</span> <span class='kw'>in</span> <span class='va'>packages</span><span class='op'>)</span><span class='op'>{</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span>
  <span class='op'>}</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<h3 id="importing-provided-data">2) Importing Provided Data</h3>
<p>The data provided are a set of current and historical news reports, as well as resumes of numerous GAStech employees and email headers from two weeks of internal GAStech company email. The data in resumes folder has already been processed and is in the ‘EmployeeRecords.xlsx’ file. Therefore, we will be using that file directly.</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>File/Folder Name</th>
<th>About</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>News Articles</td>
<td>Folder containing various newsgroups and news articles within them</td>
</tr>
<tr class="even">
<td>resumes</td>
<td>Folder consisting of resumes of employees</td>
</tr>
<tr class="odd">
<td>EmployeeRecords.xlsx</td>
<td>Details on employees</td>
</tr>
<tr class="even">
<td>email headers.csv</td>
<td>Email headers from two weeks</td>
</tr>
</tbody>
</table>
<p><strong>Importing News Articles </strong></p>
<p>Since there are multiple files in various folders, we specify the root directory which is the “News Articles” and write a function to read all files from folder into a data frame instead of using a for loop which is slower. After reading all files, we will save all the data into a variable called ‘raw_text’.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#root folder directory</span>
<span class='va'>news</span><span class='op'>=</span><span class='st'>"data/News Articles/"</span>

<span class='co'>#define a function to read all files from folder into a data frame</span>
<span class='va'>read_folder</span><span class='op'>=</span><span class='kw'>function</span><span class='op'>(</span><span class='va'>infolder</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'>tibble</span><span class='op'>(</span>file<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>dir</a></span><span class='op'>(</span><span class='va'>infolder</span>,full.names<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
    <span class='fu'>mutate</span><span class='op'>(</span>text<span class='op'>=</span><span class='fu'>map</span><span class='op'>(</span><span class='va'>file</span>,<span class='va'>read_lines</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span>
    <span class='fu'>transmute</span><span class='op'>(</span>id<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/basename.html'>basename</a></span><span class='op'>(</span><span class='va'>file</span><span class='op'>)</span>,<span class='va'>text</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
    <span class='fu'>unnest</span><span class='op'>(</span><span class='va'>text</span><span class='op'>)</span>
<span class='op'>}</span>  
<span class='co'>#read data</span>
<span class='va'>raw_text</span><span class='op'>=</span><span class='fu'>tibble</span><span class='op'>(</span>folder<span class='op'>=</span>
                  <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>dir</a></span><span class='op'>(</span><span class='va'>news</span>,
                      full.names<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>mutate</span><span class='op'>(</span>folder_out<span class='op'>=</span><span class='fu'>map</span><span class='op'>(</span><span class='va'>folder</span>,
                        <span class='va'>read_folder</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>unnest</span><span class='op'>(</span>cols<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>folder_out</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>transmute</span><span class='op'>(</span>newsgroup<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/basename.html'>basename</a></span><span class='op'>(</span><span class='va'>folder</span><span class='op'>)</span>,<span class='va'>id</span>,<span class='va'>text</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><strong>Importing Email and Employee data </strong></p>
<p>For the data already present in either a “.xlsx” or “.csv” file, we can use the existing functions “read_excel” and “read_csv” respectively. These functions will read the data in the files and output them as data frames. “read_excel” function can be used for not only “.xlsx” but also “.xls” files.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>employee_data</span> <span class='op'>&lt;-</span> <span class='fu'>read_excel</span><span class='op'>(</span><span class='st'>"data/EmployeeRecords.xlsx"</span><span class='op'>)</span>
<span class='va'>email_data</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/email headers.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="processing-news-articles">3) Processing News Articles</h3>
<p>Below is how the raw_text datatable looks like. It is visible that the data is very dirty and there is a lot of processing that has to be done.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>raw_text</span>,<span class='fl'>10</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 10 x 3
   newsgroup      id      text                                 
   &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;                                
 1 All News Today 121.txt &quot;SOURCE: All News Today&quot;             
 2 All News Today 121.txt &quot;&quot;                                   
 3 All News Today 121.txt &quot;TITLE: POK PROTESTS END IN ARRESTS &quot;
 4 All News Today 121.txt &quot;&quot;                                   
 5 All News Today 121.txt &quot; &quot;                                  
 6 All News Today 121.txt &quot;&quot;                                   
 7 All News Today 121.txt &quot;PUBLISHED: 2005/04/06&quot;              
 8 All News Today 121.txt &quot; &quot;                                  
 9 All News Today 121.txt &quot;&quot;                                   
10 All News Today 121.txt &quot;LOCATION: ELODIS, Kronos &quot;          </code></pre>
</div>
<p><strong>Initial Cleaning Steps</strong></p>
<p>Lets start by deleting the text that are empty strings and also it is noticeable that text starting with “SOURCE” is of no additional use to us as the content is already available in column ‘newsgroup’. Also, lets maintain the ‘id’ column as a number and remove the ‘.txt’ extension..</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#delete empty cells</span>
<span class='va'>row_numbers</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>""</span>,<span class='st'>" "</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>raw_text</span><span class='op'>=</span><span class='va'>raw_text</span><span class='op'>[</span><span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>row_numbers</span><span class='op'>)</span>,<span class='op'>]</span>

<span class='co'>#remove .txt from id</span>
<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>id</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>".txt"</span>,<span class='st'>""</span>,<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>id</span><span class='op'>)</span>

<span class='co'>#remove the SOURCE as it s already there as newsgroup</span>
<span class='va'>row_numbers</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grepl</a></span><span class='op'>(</span><span class='st'>"SOURCE:"</span>,<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span>,fixed<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>raw_text</span><span class='op'>=</span><span class='va'>raw_text</span><span class='op'>[</span><span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>row_numbers</span><span class='op'>)</span>,<span class='op'>]</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 6 x 3
  newsgroup     id    text                                            
  &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;                                           
1 All News Tod~ 121   &quot;TITLE: POK PROTESTS END IN ARRESTS &quot;           
2 All News Tod~ 121   &quot;PUBLISHED: 2005/04/06&quot;                         
3 All News Tod~ 121   &quot;LOCATION: ELODIS, Kronos &quot;                     
4 All News Tod~ 121   &quot;Fifteen members of the Protectors of Kronos (P~
5 All News Tod~ 121   &quot;When the federal police began arresting the PO~
6 All News Tod~ 135   &quot;TITLE: RALLY SCHEDULED IN SUPPORT OF INCREASED~</code></pre>
</div>
<p><strong>Processing Title</strong></p>
<p>Instead of keeping all text in one column, it is better to have distinct columns for different contents. For example, there is a sub field starting with “TITLE” in the text column and it can be put into a new separate column. For this, we make use of two functions called ‘startsWith’ which checks if a string starts with the mentioned string and ‘gsub’ which replaces a string with another string.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Title</span> <span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/startsWith.html'>startsWith</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span>, <span class='st'>"TITLE"</span><span class='op'>)</span>,<span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>"TITLE: "</span>,<span class='st'>""</span>,<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span><span class='op'>)</span>,<span class='st'>""</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Do note that for text processing, one has to check the resultant datatable to see if there is any further modification required. In this case, after going through the data table, it was observed that file id 33 has misplaced text and this has to be separately handled as below.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#after exploring the data, it appears that the content of file 33 is not proper.</span>
<span class='co'>#So there is a need to modify it separately</span>
<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Title</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>id</span><span class='op'>==</span><span class='st'>"33"</span>,
                      <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/startsWith.html'>startsWith</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span>, <span class='st'>"PUBLISHED"</span><span class='op'>)</span>,
                             <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>"PUBLISHED: "</span>,<span class='st'>""</span>,<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span><span class='op'>)</span>,<span class='st'>""</span><span class='op'>)</span>,
                      <span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Title</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Not all rows have the field Title, the below code will populate all records with Title. The function ‘unique’ is used to identify the unique values present in the datatable. The ‘which’ function returns the row numbers that meet the criteria. Function ‘match’ is used to obtain value from another dataframe based on the match condition. Lastly, we trim any spaces present at the start or end of the string. This is done using the function ‘str_trim’.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>title_sub_dataframe</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"id"</span>,<span class='st'>"Title"</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span>
<span class='va'>row_numbers</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='va'>title_sub_dataframe</span><span class='op'>$</span><span class='va'>Title</span><span class='op'>==</span><span class='st'>""</span><span class='op'>)</span>
<span class='va'>title_sub_dataframe</span><span class='op'>=</span><span class='va'>title_sub_dataframe</span><span class='op'>[</span><span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>row_numbers</span><span class='op'>)</span>,<span class='op'>]</span>
<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Title</span><span class='op'>=</span><span class='va'>title_sub_dataframe</span><span class='op'>$</span><span class='va'>Title</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/match.html'>match</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>id</span>,<span class='va'>title_sub_dataframe</span><span class='op'>$</span><span class='va'>id</span><span class='op'>)</span><span class='op'>]</span>

<span class='co'>### trim space at start and end if there exists</span>
<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Title</span><span class='op'>=</span><span class='fu'>str_trim</span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Title</span>, side <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"both"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>raw_text</span>
</code></pre>
</div>
<pre><code># A tibble: 5,388 x 4
   newsgroup   id    text                      Title                  
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;                     &lt;chr&gt;                  
 1 All News T~ 121   &quot;TITLE: POK PROTESTS END~ POK PROTESTS END IN AR~
 2 All News T~ 121   &quot;PUBLISHED: 2005/04/06&quot;   POK PROTESTS END IN AR~
 3 All News T~ 121   &quot;LOCATION: ELODIS, Krono~ POK PROTESTS END IN AR~
 4 All News T~ 121   &quot;Fifteen members of the ~ POK PROTESTS END IN AR~
 5 All News T~ 121   &quot;When the federal police~ POK PROTESTS END IN AR~
 6 All News T~ 135   &quot;TITLE: RALLY SCHEDULED ~ RALLY SCHEDULED IN SUP~
 7 All News T~ 135   &quot;PUBLISHED: 2012/04/09&quot;   RALLY SCHEDULED IN SUP~
 8 All News T~ 135   &quot;LOCATION: ABILA, Kronos~ RALLY SCHEDULED IN SUP~
 9 All News T~ 135   &quot;Silvia Marek, leader of~ RALLY SCHEDULED IN SUP~
10 All News T~ 135   &quot;\&quot;I&#39;m calling for an en~ RALLY SCHEDULED IN SUP~
# ... with 5,378 more rows</code></pre>
</div>
<p>Looked through the dataframe again and noticed that there are a few titles which do the fit the context. The below mentioned two titles are dates and do not fit the ‘Title’ column. Therefore, ‘ifelse’ statement is used to replace the mentioned titles to NA or else keep the title as it is.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>##looking at the data now, there appears to be some dates and they can be removed</span>
<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Title</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Title</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"4 of March of 2010"</span>, <span class='st'>"2014/03/26"</span><span class='op'>)</span>,<span class='cn'>NA</span>,<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Title</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><strong>Processing Location</strong></p>
<p>Having processed ‘Title’, lets move on to ‘Location’. Using the similar logic as used in Title’, run the below chunk of code to create a new column called ‘Location’. Here, ‘mgsub’ function was used and not ‘gsub’ because here we have to check for more than 1 string pattern and it cannot be done with ‘gsub’ hence, ‘mgsub’ function was used for the same purpose.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span> <span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/startsWith.html'>startsWith</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span>, <span class='st'>"LOCATION"</span><span class='op'>)</span>,
                           <span class='fu'>mgsub</span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"LOCATION: "</span>, <span class='st'>"LOCATIONS:  "</span><span class='op'>)</span>, 
                                 <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>""</span>, <span class='st'>""</span><span class='op'>)</span><span class='op'>)</span>,<span class='st'>""</span><span class='op'>)</span>

<span class='va'>location_sub_dataframe</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"id"</span>,<span class='st'>"Location"</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span>
<span class='va'>row_numbers</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='va'>location_sub_dataframe</span><span class='op'>$</span><span class='va'>Location</span><span class='op'>==</span><span class='st'>""</span><span class='op'>)</span>
<span class='va'>location_sub_dataframe</span><span class='op'>=</span><span class='va'>location_sub_dataframe</span><span class='op'>[</span><span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>row_numbers</span><span class='op'>)</span>,<span class='op'>]</span>

<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span><span class='op'>=</span><span class='va'>location_sub_dataframe</span><span class='op'>$</span><span class='va'>Location</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/match.html'>match</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>id</span>,<span class='va'>location_sub_dataframe</span><span class='op'>$</span><span class='va'>id</span><span class='op'>)</span><span class='op'>]</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 6 x 5
  newsgroup   id    text                Title               Location  
  &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;               &lt;chr&gt;               &lt;chr&gt;     
1 All News T~ 121   &quot;TITLE: POK PROTES~ POK PROTESTS END I~ &quot;ELODIS, ~
2 All News T~ 121   &quot;PUBLISHED: 2005/0~ POK PROTESTS END I~ &quot;ELODIS, ~
3 All News T~ 121   &quot;LOCATION: ELODIS,~ POK PROTESTS END I~ &quot;ELODIS, ~
4 All News T~ 121   &quot;Fifteen members o~ POK PROTESTS END I~ &quot;ELODIS, ~
5 All News T~ 121   &quot;When the federal ~ POK PROTESTS END I~ &quot;ELODIS, ~
6 All News T~ 135   &quot;TITLE: RALLY SCHE~ RALLY SCHEDULED IN~ &quot;ABILA, K~</code></pre>
</div>
<p>The unique locations existing in the datatable are:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> [1] &quot;ELODIS, Kronos &quot;                                                        
 [2] &quot;ABILA, Kronos &quot;                                                         
 [3] NA                                                                       
 [4] &quot;Abila, Kronos &quot;                                                         
 [5] &quot;ABILA, Kronos&quot;                                                          
 [6] &quot;TITLE: KRONOS POLICE ARREST BLOTTER &quot;                                   
 [7] &quot;TITLE: OF TEN YEARS &quot;                                                   
 [8] &quot;ELODIS, Kronos&quot;                                                         
 [9] &quot;TITLE: ARREST BLOTTER OF THE POLICE FORCE KRONOS &quot;                      
[10] &quot;CENTRUM, Tethys &quot;                                                       
[11] &quot;TITLE: ELODIS PUBLIC HEALTH FACT SHEET &quot;                                
[12] &quot;TITLE: GOVERNMENT STANDS UP ANTI&quot;                                       
[13] &quot;TITLE: GRAND OPENING GASTECH&quot;                                           
[14] &quot;TITLE: Abila police break up sit&quot;                                       
[15] &quot;TITLE: Multi&quot;                                                           
[16] &quot;This is the first confirmation that today&#39;s events surrounding GAStech &quot;
[17] &quot;Kronos will add Tethys which anti&quot;                                      
[18] &quot;TITLE: DRYING PAPER OF THE HALTING OF THE POLICE OF KRONOS &quot;            
[19] &quot;DAVOS, Switzerland &quot;                                                    
[20] &quot;TITLE: The movement of the block&quot;                                       
[21] &quot;This Article is the second of  three&quot;                                   </code></pre>
</div>
<p>Based at the locations available, there is further processing that has to be done. After further exploring, it is noticeable that a few files have “LOCATION: TITLE:…”. This does not make any sense and therefore, any text starting with “TITLE” under the column location can be replace with NA. Also, the syntax for a valid location is “City, Country” as seen from the unique values above, therefore, replacing all strings with no ‘,’ with NA will remove all other text present. Lastly, maintain the naming convention by keeping the city in capitals and country in a title format meaning only the first letter will be capital and others in lower case.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>## need to further clean location</span>
<span class='co'>### replace everything that starts with TITLE to NA</span>
<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span> <span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/startsWith.html'>startsWith</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span>, <span class='st'>"TITLE"</span><span class='op'>)</span>,<span class='cn'>NA</span>,<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span><span class='op'>)</span>

<span class='co'>### replace everything without ',' with NA</span>
<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span> <span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/grep.html'>grepl</a></span><span class='op'>(</span><span class='st'>","</span>,<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span>,fixed<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>,<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span>,<span class='cn'>NA</span><span class='op'>)</span>

<span class='co'>### trim space at end</span>
<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span><span class='op'>=</span><span class='fu'>str_trim</span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span>, side <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"both"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>### Standardize all names</span>
<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span> <span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span><span class='op'>)</span>,
                           <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/chartr.html'>toupper</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/substr.html'>substring</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span>,<span class='fl'>1</span>,
                                                    <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gregexpr</a></span><span class='op'>(</span>pattern<span class='op'>=</span><span class='st'>','</span>,
                                                             <span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span><span class='op'>)</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span>,
                                  <span class='fu'><a href='https://rdrr.io/r/base/substr.html'>substring</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span>,
                                            <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gregexpr</a></span><span class='op'>(</span>pattern <span class='op'>=</span><span class='st'>','</span>,
                                                     <span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span><span class='op'>)</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>+</span><span class='fl'>1</span>,<span class='op'>)</span><span class='op'>)</span>,
                           <span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Location</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;ELODIS, Kronos&quot;     &quot;ABILA, Kronos&quot;      NA                  
[4] &quot;CENTRUM, Tethys&quot;    &quot;DAVOS, Switzerland&quot;</code></pre>
</div>
<p>The location values now look clean and tidy.</p>
<p><strong>Processing Published</strong></p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span> <span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/startsWith.html'>startsWith</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span>, <span class='st'>"PUBLISHED"</span><span class='op'>)</span> <span class='op'>|</span> 
                              <span class='fu'><a href='https://rdrr.io/r/base/startsWith.html'>startsWith</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span>, <span class='st'>" PUBLISHED"</span><span class='op'>)</span>,
                            <span class='fu'>mgsub</span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"PUBLISHED: "</span>, <span class='st'>" PUBLISHED:  "</span><span class='op'>)</span>,
                                  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>""</span>, <span class='st'>""</span><span class='op'>)</span><span class='op'>)</span>,
                            <span class='st'>""</span><span class='op'>)</span>

<span class='co'>#after exploring the data, it appears that the content of file 33 is not proper.</span>
<span class='co'>#So there is a need to modify it separately</span>
<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>id</span><span class='op'>==</span><span class='st'>"33"</span>,
                          <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/startsWith.html'>startsWith</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span>, <span class='st'>"AUTHOR"</span><span class='op'>)</span>,
                                 <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>"AUTHOR: "</span>,<span class='st'>""</span>,<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span><span class='op'>)</span>,<span class='st'>""</span><span class='op'>)</span>,
                          <span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>)</span>

<span class='va'>published_sub_dataframe</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"id"</span>,<span class='st'>"Published"</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span>
<span class='va'>row_numbers</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='va'>published_sub_dataframe</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>==</span><span class='st'>""</span><span class='op'>)</span>
<span class='va'>published_sub_dataframe</span><span class='op'>=</span><span class='va'>published_sub_dataframe</span><span class='op'>[</span><span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>row_numbers</span><span class='op'>)</span>,<span class='op'>]</span>
<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>=</span><span class='va'>published_sub_dataframe</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/match.html'>match</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>id</span>,<span class='va'>published_sub_dataframe</span><span class='op'>$</span><span class='va'>id</span><span class='op'>)</span><span class='op'>]</span>

<span class='co'>### trim space at start and end if there exists</span>
<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>=</span><span class='fu'>str_trim</span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span>, side <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"both"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>raw_text</span>,<span class='fl'>10</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 10 x 6
   newsgroup  id    text            Title           Location Published
   &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;           &lt;chr&gt;           &lt;chr&gt;    &lt;chr&gt;    
 1 All News ~ 121   &quot;TITLE: POK PR~ POK PROTESTS E~ ELODIS,~ 2005/04/~
 2 All News ~ 121   &quot;PUBLISHED: 20~ POK PROTESTS E~ ELODIS,~ 2005/04/~
 3 All News ~ 121   &quot;LOCATION: ELO~ POK PROTESTS E~ ELODIS,~ 2005/04/~
 4 All News ~ 121   &quot;Fifteen membe~ POK PROTESTS E~ ELODIS,~ 2005/04/~
 5 All News ~ 121   &quot;When the fede~ POK PROTESTS E~ ELODIS,~ 2005/04/~
 6 All News ~ 135   &quot;TITLE: RALLY ~ RALLY SCHEDULE~ ABILA, ~ 2012/04/~
 7 All News ~ 135   &quot;PUBLISHED: 20~ RALLY SCHEDULE~ ABILA, ~ 2012/04/~
 8 All News ~ 135   &quot;LOCATION: ABI~ RALLY SCHEDULE~ ABILA, ~ 2012/04/~
 9 All News ~ 135   &quot;Silvia Marek,~ RALLY SCHEDULE~ ABILA, ~ 2012/04/~
10 All News ~ 135   &quot;\&quot;I&#39;m calling~ RALLY SCHEDULE~ ABILA, ~ 2012/04/~</code></pre>
</div>
<p>The unique published dates existing in the datatable are:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>  [1] &quot;2005/04/06&quot;            &quot;2012/04/09&quot;           
  [3] &quot;1993/02/02&quot;            &quot;Petrus Gerhard&quot;       
  [5] &quot;1998/05/15&quot;            &quot;2004/05/29&quot;           
  [7] &quot;2013/06/21&quot;            &quot;2001/03/22&quot;           
  [9] &quot;1998/11/15&quot;            &quot;2009/06/20&quot;           
 [11] &quot;2007/03/21&quot;            &quot;1999/07/08&quot;           
 [13] &quot;1998/05/16&quot;            &quot;2009/03/12&quot;           
 [15] &quot;2012/06/20&quot;            &quot;2014/01/19&quot;           
 [17] &quot;2012/09/08&quot;            &quot;2011/06/21&quot;           
 [19] &quot;By Haneson Ngohebo&quot;    &quot;2014/01/20&quot;           
 [21] &quot;2009/02/21&quot;            &quot;2009/06/21&quot;           
 [23] &quot;1997/10/17&quot;            &quot;2013/12/17&quot;           
 [25] &quot;2011/11/23&quot;            &quot;2000/10/04&quot;           
 [27] &quot;2000/08/18&quot;            &quot;2009/03/14&quot;           
 [29] &quot;2005/09/26&quot;            &quot;2010/06/15&quot;           
 [31] &quot;2011/05/15&quot;            &quot;2007/04/11&quot;           
 [33] &quot;1998/11/17&quot;            &quot;2010/10/04&quot;           
 [35] &quot;2012/03/10&quot;            &quot;2010/06/21&quot;           
 [37] &quot;2011/07/29&quot;            &quot;1997/04/24&quot;           
 [39] &quot;2012/08/24&quot;            &quot;2005/09/25&quot;           
 [41] &quot;2011/07/28&quot;            &quot;1997/04/23&quot;           
 [43] &quot;1997/10/16&quot;            &quot;2012/08/23&quot;           
 [45] &quot;2010/10/03&quot;            &quot;2010/06/14&quot;           
 [47] &quot;1998/11/16&quot;            &quot;2000/10/02&quot;           
 [49] &quot;2009/02/19&quot;            &quot;2000/08/17&quot;           
 [51] &quot;2009/03/13&quot;            &quot;20 January 2014&quot;      
 [53] &quot;21 January 2014&quot;       &quot;2012/11/11&quot;           
 [55] &quot;2002/05/27&quot;            &quot;2001/09/02&quot;           
 [57] &quot;1998/05/17&quot;            &quot;2004/05/31&quot;           
 [59] &quot;1998/03/21&quot;            &quot;2001/03/23&quot;           
 [61] &quot;2009/03/09&quot;            &quot;2014/03/26&quot;           
 [63] &quot;2012/06/22&quot;            &quot;1998/04/27&quot;           
 [65] &quot;2013/06/22&quot;            &quot;2000/06/01&quot;           
 [67] &quot;1993/02/04&quot;            &quot;2005/04/07&quot;           
 [69] &quot;2012/04/10&quot;            &quot;1998/08/21&quot;           
 [71] &quot;2013/02/24&quot;            &quot;1999/11/16&quot;           
 [73] &quot;2009/02/23&quot;            &quot;1982/10/03&quot;           
 [75] &quot;21 October 2013&quot;       &quot;2007/03/19&quot;           
 [77] &quot;2012/06/21&quot;            &quot;2009/06/23&quot;           
 [79] &quot;2014/01/21&quot;            &quot;1984/05/05&quot;           
 [81] &quot;2013/11/13&quot;            &quot;2012/02/22&quot;           
 [83] &quot;2013/02/09&quot;            &quot;19 January 2014&quot;      
 [85] &quot;22 March 2001&quot;         &quot;20 June 2011&quot;         
 [87] &quot;20 June 2012&quot;          &quot;05 April 2005&quot;        
 [89] &quot;31 May 2000&quot;           &quot;20 June 2013&quot;         
 [91] &quot;19 August 1998&quot;        &quot;12 March 2009&quot;        
 [93] &quot;25 May 2002&quot;           &quot;7 September 2012&quot;     
 [95] &quot;15 May 1998&quot;           &quot;9 April 2012&quot;         
 [97] &quot;14 November 1998&quot;      &quot;7 July 1999&quot;          
 [99] &quot;25 April 1998&quot;         &quot;31 August 2001&quot;       
[101] &quot;2 February  1993&quot;      &quot;20 March 2007&quot;        
[103] &quot;19 March 1998&quot;         &quot;19 June 2009&quot;         
[105] &quot;29 May 2004&quot;           &quot;7 March 2009&quot;         
[107] &quot;19 June 2010&quot;          &quot;2001/08/31&quot;           
[109] &quot;1993/01/19&quot;            &quot;2013/12/16&quot;           
[111] &quot;2013/06/20&quot;            &quot;1995/10/11&quot;           
[113] &quot;1995/11/21&quot;            &quot;2001/03/18&quot;           
[115] &quot;2009/02/18&quot;            &quot;1996/03/14&quot;           
[117] &quot;1999/07/04&quot;            &quot;22 February 2013&quot;     
[119] &quot;21 January 2014  1405&quot; &quot;20 February 2012&quot;     
[121] &quot;22 June 2009&quot;          &quot;4 October 1982&quot;       
[123] &quot;14 November 1999&quot;      &quot;12 November 2013&quot;     
[125] &quot;22 February 2009&quot;      &quot;18 March 2007&quot;        
[127] &quot;2 October 1982&quot;        &quot;7 February 2013&quot;      
[129] &quot;3 May 1984&quot;            &quot;18 February 2009&quot;     
[131] &quot;15 December 2013&quot;      &quot;17 March 2001&quot;        
[133] &quot;30 August 2001&quot;        &quot;14 June 2001&quot;         
[135] &quot;7 March 2012&quot;          &quot;18 January 1998&quot;      
[137] &quot;13 March 1996&quot;         &quot;21 November 1995&quot;     
[139] &quot;3 July 1999&quot;           &quot;20 June 2010&quot;         
[141] &quot;10 October 1995&quot;       &quot;21 June 2012&quot;         
[143] &quot;27 July 2011&quot;          &quot;20 June 2009&quot;         
[145] &quot;9 November 1998&quot;       &quot;18 January 1993&quot;      
[147] &quot;12 March 1993&quot;         &quot;6 April 2005&quot;         
[149] &quot;2007/04/12&quot;            &quot;2000/10/03&quot;           
[151] &quot;1997/04/25&quot;            &quot;2013/12/18&quot;           
[153] &quot;2010/06/22&quot;            &quot;2011/11/24&quot;           
[155] &quot;12 November 2012&quot;      &quot;1999/11/15&quot;           
[157] &quot;1996/07/08&quot;            &quot;2013/02/08&quot;           
[159] &quot;2009/06/22&quot;            &quot;2012/08/22&quot;           
[161] &quot;1997/10/15&quot;            &quot;17 December 2013&quot;     
[163] &quot;1984/05/04&quot;            &quot;1998/08/20&quot;           
[165] &quot;5 February 2012&quot;       &quot;1998/01/19&quot;           
[167] &quot;2010/06/19&quot;            &quot;2013/02/22&quot;           
[169] &quot;1995/03/30&quot;            &quot;1993/03/13&quot;           
[171] &quot;2003/05/17&quot;            &quot;1992/12/12&quot;           
[173] &quot;2000/08/15&quot;            &quot;2009/03/08&quot;           
[175] &quot;21 June 2009&quot;          &quot;2013/09/03&quot;           
[177] &quot;1998/11/10&quot;            &quot;2001/09/01&quot;           
[179] &quot;1994/09/24&quot;            &quot;2012/03/09&quot;           
[181] &quot;12 August 2009&quot;        &quot;1998/11/14&quot;           
[183] &quot;2013/10/22&quot;            &quot;1993/02/03&quot;           
[185] &quot;2009/05/16&quot;            &quot;1993/09/20&quot;           
[187] &quot;2002/05/25&quot;            &quot;1999/02/19&quot;           
[189] &quot;1994/02/18&quot;            &quot;2001/06/15&quot;           
[191] &quot;2004/05/30&quot;            &quot;2000/01/15&quot;           
[193] &quot;2012/03/08&quot;            &quot;2012/02/21&quot;           
[195] &quot;30 June 2013&quot;          &quot;1995/11/22&quot;           
[197] &quot;2 October 2010&quot;        &quot;8 March 2012&quot;         
[199] &quot;15 October 1997&quot;       &quot;24 September 2005&quot;    
[201] &quot;2 October 2000&quot;        &quot;22 August 2012&quot;       
[203] &quot;14 May 2011&quot;           &quot;15 November 1998&quot;     
[205] &quot;16 August 2000&quot;        &quot;22 November 2011&quot;     
[207] &quot;10 April 2007&quot;         &quot;23 April 1997&quot;        
[209] &quot;19 February 2009&quot;      &quot;13June 2010&quot;          
[211] &quot;16 December 2013&quot;      &quot;2010/03/05&quot;           
[213] &quot;2009/02/20&quot;            &quot;2011/05/16&quot;           
[215] &quot;2000/01/17&quot;            &quot;1994/09/25&quot;           
[217] &quot;2009/02/22&quot;            &quot;2000/08/16&quot;           
[219] &quot;1999/02/20&quot;            &quot;2013/09/04&quot;           
[221] &quot;2010/12/18&quot;            &quot;2003/05/19&quot;           
[223] &quot;1995/10/12&quot;            &quot;1993/09/21&quot;           
[225] &quot;2009/05/17&quot;            &quot;1992/12/13&quot;           
[227] &quot;1995/04/01&quot;            &quot;2012/06/23&quot;           
[229] &quot;2001/06/16&quot;            &quot;1995/11/23&quot;           
[231] &quot;1996/03/15&quot;            &quot;2005/04/08&quot;           
[233] &quot;2011/06/22&quot;            &quot;1998/01/20&quot;           
[235] &quot;2000/01/16&quot;            &quot;1995/03/31&quot;           
[237] &quot;2002/05/26&quot;            &quot;1999/07/09&quot;           
[239] &quot;2007/03/22&quot;            &quot;2001/03/24&quot;           
[241] &quot;1998/03/20&quot;            &quot;2012/11/12&quot;           
[243] &quot;1993/01/20&quot;            &quot;1993/03/14&quot;           
[245] &quot;2010/12/19&quot;            &quot;1996/07/09&quot;           
[247] &quot;30 March 1995&quot;         &quot;15 May 2009&quot;          
[249] &quot;15 January 2000&quot;       &quot;13 November 1998&quot;     
[251] &quot;7 July 1996&quot;           &quot;15 August 2000&quot;       
[253] &quot;18 February 1999&quot;      &quot;17 May 2003&quot;          
[255] &quot;11 December 1992&quot;      &quot;19 September 1993&quot;    
[257] &quot;17 February 1994&quot;      &quot;2 September 2013&quot;     
[259] &quot;23 September 1994&quot;     &quot;1998/04/26&quot;           
[261] &quot;2012/04/11&quot;            &quot;2000/06/02&quot;           
[263] &quot;2003/05/18&quot;            &quot;1993/09/19&quot;           
[265] &quot;1982/10/04&quot;            &quot;2007/03/20&quot;           
[267] &quot;October 21, 2013&quot;      &quot;1984/05/03&quot;           
[269] &quot;1982/10/02&quot;            &quot;1999/11/14&quot;           
[271] &quot;1999/07/05&quot;           </code></pre>
</div>
<p>The date is of many different formats and some are even in text. All of these are processed in the below chunk of code. We first convert all the data that is not in a date format to date.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>##need further cleaning</span>
<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>==</span><span class='st'>"21 January 2014  1405"</span>,<span class='st'>"21 January 2014"</span>,<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>)</span>
<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>==</span><span class='st'>"October 21, 2013"</span>,<span class='st'>"21 October 2013"</span>,<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Next, convert all dates in “21 January 2014” format to “Y/M/D”. The ‘as.Date’ function can be used to convert the text into date and then formatting it again using ‘format’ function to obtain “Y/M/D” format.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>## filtering published dates in "21 January 2014" format and converting them to Y/M/D format</span>
<span class='va'>dates_to_format</span><span class='op'>=</span><span class='fu'>str_extract</span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span>, <span class='st'>"^[0-9]{1,2}\\D[a-zA-Z]+\\D[0-9]{4}"</span><span class='op'>)</span>
<span class='va'>dates_to_format</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>dates_to_format</span><span class='op'>)</span>
<span class='va'>dates_to_format</span><span class='op'>=</span><span class='va'>dates_to_format</span><span class='op'>[</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>dates_to_format</span><span class='op'>)</span><span class='op'>]</span>

<span class='va'>sub_dates</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"id"</span>,<span class='st'>"Published"</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Published</span> <span class='op'>%in%</span> <span class='va'>dates_to_format</span><span class='op'>)</span>
<span class='va'>sub_dates</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='va'>sub_dates</span><span class='op'>$</span><span class='va'>Published</span>,format<span class='op'>=</span><span class='st'>"%d %B %Y"</span><span class='op'>)</span>
<span class='va'>sub_dates</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/format.html'>format</a></span><span class='op'>(</span><span class='va'>sub_dates</span><span class='op'>$</span><span class='va'>Published</span>,<span class='st'>"%Y/%m/%d"</span><span class='op'>)</span>

<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>subdates</span><span class='op'>=</span><span class='va'>sub_dates</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/match.html'>match</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>id</span>,<span class='va'>sub_dates</span><span class='op'>$</span><span class='va'>id</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<p>Since there are a few texts present in the Published column, after looking into the files of those id’s, it was noticeable that the date was in the next line and therefore, for these texts, the published date should be taken from the next immediate row.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>## words improper</span>
<span class='va'>dates_to_format</span><span class='op'>=</span><span class='fu'>str_extract</span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Petrus Gerhard"</span>,<span class='st'>"By Haneson Ngohebo"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>dates_to_format</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>dates_to_format</span><span class='op'>)</span>
<span class='va'>dates_to_format</span><span class='op'>=</span><span class='va'>dates_to_format</span><span class='op'>[</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>dates_to_format</span><span class='op'>)</span><span class='op'>]</span>

<span class='va'>sub_dates2</span><span class='op'>=</span><span class='va'>raw_text</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Published</span> <span class='op'>%in%</span> <span class='va'>dates_to_format</span><span class='op'>)</span>
<span class='va'>row_numbers</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/startsWith.html'>startsWith</a></span><span class='op'>(</span><span class='va'>sub_dates2</span><span class='op'>$</span><span class='va'>text</span>, <span class='st'>"PUBLISHED"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>row_numbers</span><span class='op'>=</span><span class='va'>row_numbers</span><span class='op'>+</span><span class='fl'>1</span>
<span class='va'>subset</span><span class='op'>=</span><span class='va'>sub_dates2</span><span class='op'>[</span><span class='va'>row_numbers</span>,<span class='op'>]</span>
<span class='va'>sub_dates2</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>=</span><span class='va'>subset</span><span class='op'>$</span><span class='va'>text</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/match.html'>match</a></span><span class='op'>(</span><span class='va'>sub_dates2</span><span class='op'>$</span><span class='va'>id</span>,<span class='va'>subset</span><span class='op'>$</span><span class='va'>id</span><span class='op'>)</span><span class='op'>]</span>

<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>subdates2</span><span class='op'>=</span><span class='va'>sub_dates2</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/match.html'>match</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>id</span>,<span class='va'>sub_dates2</span><span class='op'>$</span><span class='va'>id</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<p>We then update the ‘Published’ column with the modified dates using the code below.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>subdates</span><span class='op'>)</span>,<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>subdates</span>,<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>)</span>
<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>subdates2</span><span class='op'>)</span>,<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>subdates2</span>,<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>  [1] &quot;2005/04/06&quot;       &quot;2012/04/09&quot;       &quot;1993/02/02&quot;      
  [4] &quot;1998/03/20&quot;       &quot;1998/05/15&quot;       &quot;2004/05/29&quot;      
  [7] &quot;2013/06/21&quot;       &quot;2001/03/22&quot;       &quot;1998/11/15&quot;      
 [10] &quot;2009/06/20&quot;       &quot;2007/03/21&quot;       &quot;1999/07/08&quot;      
 [13] &quot;1998/05/16&quot;       &quot;2009/03/12&quot;       &quot;2012/06/20&quot;      
 [16] &quot;2014/01/19&quot;       &quot;2012/09/08&quot;       &quot;2011/06/21&quot;      
 [19] &quot;2014/01/20&quot;       &quot;2009/02/21&quot;       &quot;2009/06/21&quot;      
 [22] &quot;1997/10/17&quot;       &quot;2013/12/17&quot;       &quot;2011/11/23&quot;      
 [25] &quot;2000/10/04&quot;       &quot;2000/08/18&quot;       &quot;2009/03/14&quot;      
 [28] &quot;2005/09/26&quot;       &quot;2010/06/15&quot;       &quot;2011/05/15&quot;      
 [31] &quot;2007/04/11&quot;       &quot;1998/11/17&quot;       &quot;2010/10/04&quot;      
 [34] &quot;2012/03/10&quot;       &quot;2010/06/21&quot;       &quot;2011/07/29&quot;      
 [37] &quot;1997/04/24&quot;       &quot;2012/08/24&quot;       &quot;2005/09/25&quot;      
 [40] &quot;2011/07/28&quot;       &quot;1997/04/23&quot;       &quot;1997/10/16&quot;      
 [43] &quot;2012/08/23&quot;       &quot;2010/10/03&quot;       &quot;2010/06/14&quot;      
 [46] &quot;1998/11/16&quot;       &quot;2000/10/02&quot;       &quot;2009/02/19&quot;      
 [49] &quot;2000/08/17&quot;       &quot;2009/03/13&quot;       &quot;2014/01/21&quot;      
 [52] &quot;2012/11/11&quot;       &quot;2002/05/27&quot;       &quot;2001/09/02&quot;      
 [55] &quot;1998/05/17&quot;       &quot;2004/05/31&quot;       &quot;1998/03/21&quot;      
 [58] &quot;2001/03/23&quot;       &quot;2009/03/09&quot;       &quot;2014/03/26&quot;      
 [61] &quot;2012/06/22&quot;       &quot;1998/04/27&quot;       &quot;2013/06/22&quot;      
 [64] &quot;2000/06/01&quot;       &quot;1993/02/04&quot;       &quot;2005/04/07&quot;      
 [67] &quot;2012/04/10&quot;       &quot;1998/08/21&quot;       &quot;2013/02/24&quot;      
 [70] &quot;1999/11/16&quot;       &quot;2009/02/23&quot;       &quot;1982/10/03&quot;      
 [73] &quot;2013/10/21&quot;       &quot;2007/03/19&quot;       &quot;2012/06/21&quot;      
 [76] &quot;2009/06/23&quot;       &quot;1984/05/05&quot;       &quot;2013/11/13&quot;      
 [79] &quot;2012/02/22&quot;       &quot;2013/02/09&quot;       &quot;2011/06/20&quot;      
 [82] &quot;2005/04/05&quot;       &quot;2000/05/31&quot;       &quot;2013/06/20&quot;      
 [85] &quot;1998/08/19&quot;       &quot;2002/05/25&quot;       &quot;2012/09/07&quot;      
 [88] &quot;1998/11/14&quot;       &quot;1999/07/07&quot;       &quot;1998/04/25&quot;      
 [91] &quot;2001/08/31&quot;       &quot;2 February  1993&quot; &quot;2007/03/20&quot;      
 [94] &quot;1998/03/19&quot;       &quot;2009/06/19&quot;       &quot;2009/03/07&quot;      
 [97] &quot;2010/06/19&quot;       &quot;1993/01/19&quot;       &quot;2013/12/16&quot;      
[100] &quot;1995/10/11&quot;       &quot;1995/11/21&quot;       &quot;2001/03/18&quot;      
[103] &quot;2009/02/18&quot;       &quot;1996/03/14&quot;       &quot;1999/07/04&quot;      
[106] &quot;2013/02/22&quot;       &quot;2012/02/20&quot;       &quot;2009/06/22&quot;      
[109] &quot;1982/10/04&quot;       &quot;1999/11/14&quot;       &quot;2013/11/12&quot;      
[112] &quot;2009/02/22&quot;       &quot;2007/03/18&quot;       &quot;1982/10/02&quot;      
[115] &quot;2013/02/07&quot;       &quot;1984/05/03&quot;       &quot;2013/12/15&quot;      
[118] &quot;2001/03/17&quot;       &quot;2001/08/30&quot;       &quot;2001/06/14&quot;      
[121] &quot;2012/03/07&quot;       &quot;1998/01/18&quot;       &quot;1996/03/13&quot;      
[124] &quot;1999/07/03&quot;       &quot;2010/06/20&quot;       &quot;1995/10/10&quot;      
[127] &quot;2011/07/27&quot;       &quot;1998/11/09&quot;       &quot;1993/01/18&quot;      
[130] &quot;1993/03/12&quot;       &quot;2007/04/12&quot;       &quot;2000/10/03&quot;      
[133] &quot;1997/04/25&quot;       &quot;2013/12/18&quot;       &quot;2010/06/22&quot;      
[136] &quot;2011/11/24&quot;       &quot;2012/11/12&quot;       &quot;1999/11/15&quot;      
[139] &quot;1996/07/08&quot;       &quot;2013/02/08&quot;       &quot;2012/08/22&quot;      
[142] &quot;1997/10/15&quot;       &quot;1984/05/04&quot;       &quot;1998/08/20&quot;      
[145] &quot;2012/02/05&quot;       &quot;1998/01/19&quot;       &quot;1995/03/30&quot;      
[148] &quot;1993/03/13&quot;       &quot;2003/05/17&quot;       &quot;1992/12/12&quot;      
[151] &quot;1998/04/26&quot;       &quot;2000/08/15&quot;       &quot;2009/03/08&quot;      
[154] &quot;2013/09/03&quot;       &quot;1998/11/10&quot;       &quot;2001/09/01&quot;      
[157] &quot;1994/09/24&quot;       &quot;2012/03/09&quot;       &quot;2009/08/12&quot;      
[160] &quot;2013/10/22&quot;       &quot;1993/02/03&quot;       &quot;2009/05/16&quot;      
[163] &quot;1993/09/20&quot;       &quot;1999/02/19&quot;       &quot;1994/02/18&quot;      
[166] &quot;2001/06/15&quot;       &quot;2004/05/30&quot;       &quot;2000/01/15&quot;      
[169] &quot;2012/03/08&quot;       &quot;2012/02/21&quot;       &quot;2013/06/30&quot;      
[172] &quot;1995/11/22&quot;       &quot;20 January 2014&quot;  &quot;21 January 2014&quot; 
[175] &quot;2010/10/02&quot;       &quot;2005/09/24&quot;       &quot;2011/05/14&quot;      
[178] &quot;2000/08/16&quot;       &quot;2011/11/22&quot;       &quot;2007/04/10&quot;      
[181] &quot;2010/06/13&quot;       &quot;2010/03/05&quot;       &quot;2009/02/20&quot;      
[184] &quot;2011/05/16&quot;       &quot;2000/01/17&quot;       &quot;1994/09/25&quot;      
[187] &quot;1999/02/20&quot;       &quot;2013/09/04&quot;       &quot;2010/12/18&quot;      
[190] &quot;2003/05/19&quot;       &quot;1995/10/12&quot;       &quot;1993/09/21&quot;      
[193] &quot;2009/05/17&quot;       &quot;1992/12/13&quot;       &quot;1995/04/01&quot;      
[196] &quot;2012/06/23&quot;       &quot;2001/06/16&quot;       &quot;1995/11/23&quot;      
[199] &quot;1996/03/15&quot;       &quot;2005/04/08&quot;       &quot;2011/06/22&quot;      
[202] &quot;1998/01/20&quot;       &quot;2000/01/16&quot;       &quot;1995/03/31&quot;      
[205] &quot;2002/05/26&quot;       &quot;1999/07/09&quot;       &quot;2007/03/22&quot;      
[208] &quot;2001/03/24&quot;       &quot;1993/01/20&quot;       &quot;1993/03/14&quot;      
[211] &quot;2010/12/19&quot;       &quot;1996/07/09&quot;       &quot;2009/05/15&quot;      
[214] &quot;1998/11/13&quot;       &quot;1996/07/07&quot;       &quot;1999/02/18&quot;      
[217] &quot;1992/12/11&quot;       &quot;1993/09/19&quot;       &quot;1994/02/17&quot;      
[220] &quot;2013/09/02&quot;       &quot;1994/09/23&quot;       &quot;2012/04/11&quot;      
[223] &quot;2000/06/02&quot;       &quot;2003/05/18&quot;       &quot;1999/07/05&quot;      </code></pre>
</div>
<p>There seem to be still other formats of dates present. The below code will process them into the date formats like other dates.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>dates_to_format</span><span class='op'>=</span><span class='fu'>str_extract</span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span>, <span class='st'>"^[0-9]{1,2}\\D[a-zA-Z]+\\D{1,2}[0-9]{4}"</span><span class='op'>)</span>
<span class='va'>dates_to_format</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>dates_to_format</span><span class='op'>)</span>
<span class='va'>dates_to_format</span><span class='op'>=</span><span class='va'>dates_to_format</span><span class='op'>[</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>dates_to_format</span><span class='op'>)</span><span class='op'>]</span>

<span class='va'>sub_dates3</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"id"</span>,<span class='st'>"Published"</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Published</span> <span class='op'>%in%</span> <span class='va'>dates_to_format</span><span class='op'>)</span>
<span class='va'>sub_dates3</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='va'>sub_dates3</span><span class='op'>$</span><span class='va'>Published</span>,format<span class='op'>=</span><span class='st'>"%d %B %Y"</span><span class='op'>)</span>
<span class='va'>sub_dates3</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/format.html'>format</a></span><span class='op'>(</span><span class='va'>sub_dates3</span><span class='op'>$</span><span class='va'>Published</span>,<span class='st'>"%Y/%m/%d"</span><span class='op'>)</span>

<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>subdates3</span><span class='op'>=</span><span class='va'>sub_dates3</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/match.html'>match</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>id</span>,<span class='va'>sub_dates3</span><span class='op'>$</span><span class='va'>id</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<p>Now we will update the Publish column again and remove all other temporary column we create as part of processing.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>subdates3</span><span class='op'>)</span>,<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>subdates3</span>,<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>)</span>
<span class='va'>raw_text</span><span class='op'>=</span><span class='va'>raw_text</span><span class='op'>[</span>,<span class='op'>!</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>)</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"subdates"</span>,<span class='st'>"subdates2"</span>,<span class='st'>"subdates3"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>]</span>

<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Published</span>,format<span class='op'>=</span><span class='st'>"%Y/%m/%d"</span><span class='op'>)</span>
<span class='va'>raw_text</span>
</code></pre>
</div>
<pre><code># A tibble: 5,388 x 6
   newsgroup  id    text            Title          Location Published 
   &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;           &lt;chr&gt;          &lt;chr&gt;    &lt;date&gt;    
 1 All News ~ 121   &quot;TITLE: POK PR~ POK PROTESTS ~ ELODIS,~ 2005-04-06
 2 All News ~ 121   &quot;PUBLISHED: 20~ POK PROTESTS ~ ELODIS,~ 2005-04-06
 3 All News ~ 121   &quot;LOCATION: ELO~ POK PROTESTS ~ ELODIS,~ 2005-04-06
 4 All News ~ 121   &quot;Fifteen membe~ POK PROTESTS ~ ELODIS,~ 2005-04-06
 5 All News ~ 121   &quot;When the fede~ POK PROTESTS ~ ELODIS,~ 2005-04-06
 6 All News ~ 135   &quot;TITLE: RALLY ~ RALLY SCHEDUL~ ABILA, ~ 2012-04-09
 7 All News ~ 135   &quot;PUBLISHED: 20~ RALLY SCHEDUL~ ABILA, ~ 2012-04-09
 8 All News ~ 135   &quot;LOCATION: ABI~ RALLY SCHEDUL~ ABILA, ~ 2012-04-09
 9 All News ~ 135   &quot;Silvia Marek,~ RALLY SCHEDUL~ ABILA, ~ 2012-04-09
10 All News ~ 135   &quot;\&quot;I&#39;m calling~ RALLY SCHEDUL~ ABILA, ~ 2012-04-09
# ... with 5,378 more rows</code></pre>
</div>
<p><strong>Processing Content</strong></p>
<p>Since we have extracted “TITLE”, “LOCATION” and ’PUBLISHED" from the text column and created separate columns for them ,we can exclude all the records that have the “text” column consisting of these content.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># removing text with TITLE:, LOCATION:, PUBLISHED:</span>
<span class='va'>row_numbers1</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/startsWith.html'>startsWith</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span>, <span class='st'>"TITLE"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>row_numbers2</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/startsWith.html'>startsWith</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span>, <span class='st'>"PUBLISHED"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>row_numbers3</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/startsWith.html'>startsWith</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span>, <span class='st'>" PUBLISHED"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>row_numbers4</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/startsWith.html'>startsWith</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span>, <span class='st'>"LOCATION"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>row_numbers5</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/startsWith.html'>startsWith</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span>, <span class='st'>"AUTHOR"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>raw_text</span><span class='op'>=</span><span class='va'>raw_text</span><span class='op'>[</span><span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>row_numbers1</span>,<span class='va'>row_numbers2</span>,<span class='va'>row_numbers3</span>,<span class='va'>row_numbers4</span>,<span class='va'>row_numbers5</span><span class='op'>)</span>,<span class='op'>]</span>
<span class='va'>raw_text</span>
</code></pre>
</div>
<pre><code># A tibble: 3,015 x 6
   newsgroup  id    text            Title          Location Published 
   &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;           &lt;chr&gt;          &lt;chr&gt;    &lt;date&gt;    
 1 All News ~ 121   &quot;Fifteen membe~ POK PROTESTS ~ ELODIS,~ 2005-04-06
 2 All News ~ 121   &quot;When the fede~ POK PROTESTS ~ ELODIS,~ 2005-04-06
 3 All News ~ 135   &quot;Silvia Marek,~ RALLY SCHEDUL~ ABILA, ~ 2012-04-09
 4 All News ~ 135   &quot;\&quot;I&#39;m calling~ RALLY SCHEDUL~ ABILA, ~ 2012-04-09
 5 All News ~ 152   &quot;In a glitzy p~ LACK OF DETAI~ ABILA, ~ 1993-02-02
 6 All News ~ 154   &quot;1998/03/20&quot;    ELODIS, KRONO~ ELODIS,~ 1998-03-20
 7 All News ~ 154   &quot;NOTE: This ar~ ELODIS, KRONO~ ELODIS,~ 1998-03-20
 8 All News ~ 154   &quot;This article ~ ELODIS, KRONO~ ELODIS,~ 1998-03-20
 9 All News ~ 154   &quot;ELODIS, Krono~ ELODIS, KRONO~ ELODIS,~ 1998-03-20
10 All News ~ 154   &quot;Two weeks pri~ ELODIS, KRONO~ ELODIS,~ 1998-03-20
# ... with 3,005 more rows</code></pre>
</div>
<p>Going through the text column, it was visible that there are dates present in some records this is due to some files having Published date in the next line which was discussed under “Processing Published” category. These dates are present in “yyyy/mm/dd” format or “date month year” format. The below regular expressions were used to detect those patterns in the text column. It was identified that there were 7 dates however only 5 of them were recognized, therefore, the other 2 were added manually.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>raw_text1</span><span class='op'>=</span><span class='fu'>str_extract</span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"^[0-9]{1,2}\\D[a-zA-Z]+\\D[0-9]{4}"</span>,<span class='st'>"^[0-9]{4}\\D[0-9]{1,2}\\D[0-9]{1,2}"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>raw_text1</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>raw_text1</span><span class='op'>)</span>
<span class='va'>raw_text1</span><span class='op'>=</span><span class='va'>raw_text1</span><span class='op'>[</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>raw_text1</span><span class='op'>)</span><span class='op'>]</span>
<span class='va'>raw_text1</span><span class='op'>[</span><span class='fl'>6</span><span class='op'>]</span> <span class='op'>=</span><span class='st'>"1998/05/15"</span>
<span class='va'>raw_text1</span><span class='op'>[</span><span class='fl'>7</span><span class='op'>]</span> <span class='op'>=</span><span class='st'>"17 January 1995"</span>
<span class='va'>row_numbers6</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>text</span> <span class='op'>%in%</span> <span class='va'>raw_text1</span><span class='op'>)</span>
<span class='va'>raw_text</span><span class='op'>=</span><span class='va'>raw_text</span><span class='op'>[</span><span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>row_numbers6</span><span class='op'>)</span>,<span class='op'>]</span>
</code></pre>
</div>
</div>
<p>Now, we have to combine all the recodes with the same id. After processing, we now will have 845 records that reflect the 845 files that we have and each record consists of the “newsgroup”, “id”, “Title”, “Location”, “Published” and “Content”.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>content</span><span class='op'>=</span><span class='va'>raw_text</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>id</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarise_all</span><span class='op'>(</span><span class='fu'>funs</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/toString.html'>toString</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>raw_text</span><span class='op'>=</span><span class='va'>raw_text</span><span class='op'>[</span>,<span class='op'>!</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>)</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"text"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>]</span>
<span class='va'>raw_text</span><span class='op'>$</span><span class='va'>Content</span><span class='op'>=</span><span class='va'>content</span><span class='op'>$</span><span class='va'>text</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/match.html'>match</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>$</span><span class='va'>id</span>,<span class='va'>content</span><span class='op'>$</span><span class='va'>id</span><span class='op'>)</span><span class='op'>]</span>
<span class='va'>cleaned_text</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>raw_text</span><span class='op'>)</span>
<span class='va'>cleaned_text</span>
</code></pre>
</div>
<pre><code># A tibble: 845 x 6
   newsgroup  id    Title          Location Published  Content        
   &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;          &lt;chr&gt;    &lt;date&gt;     &lt;chr&gt;          
 1 All News ~ 121   POK PROTESTS ~ ELODIS,~ 2005-04-06 &quot;Fifteen membe~
 2 All News ~ 135   RALLY SCHEDUL~ ABILA, ~ 2012-04-09 &quot;Silvia Marek,~
 3 All News ~ 152   LACK OF DETAI~ ABILA, ~ 1993-02-02 &quot;In a glitzy p~
 4 All News ~ 154   ELODIS, KRONO~ ELODIS,~ 1998-03-20 &quot;NOTE: This ar~
 5 All News ~ 237   ELODIS, KRONO~ &lt;NA&gt;     1998-05-15 &quot;NOTE: This ar~
 6 All News ~ 251   ELODIS PUBLIC~ ELODIS,~ 2004-05-29 &quot;The Elodis Co~
 7 All News ~ 341   WHO BRINGS A ~ ABILA, ~ 2013-06-21 &quot;ABILA, Kronos~
 8 All News ~ 391   TAX MEASURE D~ ABILA, ~ 2001-03-22 &quot;A measure to ~
 9 All News ~ 420   POK REPRESENT~ ABILA, ~ 1998-11-15 &quot;Representativ~
10 All News ~ 554   ELIAN KAREL D~ ABILA, ~ 2009-06-20 &quot;Elian Karel, ~
# ... with 835 more rows</code></pre>
</div>
<h3 id="processing-email-and-employee-data">4) Processing Email and Employee Data</h3>
<p>Considering that the data is based on email, we can make use of the networking graph for visualization and for that purpose, we will need the data to be in the “source” and “target” format. The email_data dataframe currently is very raw and needs to be processed to the required format.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>email_data</span>,<span class='fl'>10</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 10 x 4
   From            To                         Date    Subject         
   &lt;chr&gt;           &lt;chr&gt;                      &lt;chr&gt;   &lt;chr&gt;           
 1 Varja.Lagos@ga~ Varja.Lagos@gastech.com.k~ 1/6/20~ Patrol schedule~
 2 Brand.Tempesta~ Birgitta.Frente@gastech.c~ 1/6/20~ Wellhead flow r~
 3 Isak.Baza@gast~ Isak.Baza@gastech.com.kro~ 1/6/20~ RE: GT-SeismicP~
 4 Lucas.Alcazar@~ Isak.Baza@gastech.com.kro~ 1/6/20~ RE: GT-SeismicP~
 5 Linnea.Bergen@~ Rachel.Pantanal@gastech.c~ 1/6/20~ RE: Upcoming bi~
 6 Loreto.Bodrogi~ Ingrid.Barranco@gastech.c~ 1/6/20~ Plants          
 7 Linnea.Bergen@~ Rachel.Pantanal@gastech.c~ 1/6/20~ RE: Upcoming bi~
 8 Lucas.Alcazar@~ Nils.Calixto@gastech.com.~ 1/6/20~ GT-SeismicProce~
 9 Isak.Baza@gast~ Isak.Baza@gastech.com.kro~ 1/6/20~ RE: GT-SeismicP~
10 Lucas.Alcazar@~ Isak.Baza@gastech.com.kro~ 1/6/20~ RE: GT-SeismicP~</code></pre>
</div>
<p>The “To” column has various email id’s that are seperated by a ‘,’. We first need to split all the id’s by ‘,’ and then use the ‘concat.split.multiple’ function to split all the emails in “To” into multiple rows.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># break on , in "To"</span>
<span class='va'>email_data_clean</span> <span class='op'>&lt;-</span> <span class='fu'>cSplit</span><span class='op'>(</span><span class='va'>email_data</span>,splitCols<span class='op'>=</span> <span class='st'>"To"</span>, sep<span class='op'>=</span><span class='st'>","</span>, direction<span class='op'>=</span><span class='st'>"long"</span><span class='op'>)</span>
<span class='fu'>glimpse</span><span class='op'>(</span><span class='va'>email_data_clean</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 8,990
Columns: 4
$ From    &lt;chr&gt; &quot;Varja.Lagos@gastech.com.kronos&quot;, &quot;Varja.Lagos@gaste~
$ To      &lt;fct&gt; Varja.Lagos@gastech.com.kronos, Hennie.Osvaldo@gaste~
$ Date    &lt;chr&gt; &quot;1/6/2014 10:28&quot;, &quot;1/6/2014 10:28&quot;, &quot;1/6/2014 10:28&quot;~
$ Subject &lt;chr&gt; &quot;Patrol schedule changes&quot;, &quot;Patrol schedule changes&quot;~</code></pre>
</div>
<p>Next, we shall remove the email id’s where the “From” and “To” are the same. This is to ensure that when be plot the networking graph, we will not have the same user who send an email to himself.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># removing same from and to</span>
<span class='va'>row_numbers</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>From</span> <span class='op'>==</span><span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>To</span><span class='op'>)</span>
<span class='va'>email_data_clean</span><span class='op'>=</span><span class='va'>email_data_clean</span><span class='op'>[</span><span class='op'>-</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>row_numbers</span><span class='op'>)</span>,<span class='op'>]</span>
<span class='fu'>glimpse</span><span class='op'>(</span><span class='va'>email_data_clean</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 8,185
Columns: 4
$ From    &lt;chr&gt; &quot;Varja.Lagos@gastech.com.kronos&quot;, &quot;Varja.Lagos@gaste~
$ To      &lt;fct&gt; Hennie.Osvaldo@gastech.com.kronos, Loreto.Bodrogi@ga~
$ Date    &lt;chr&gt; &quot;1/6/2014 10:28&quot;, &quot;1/6/2014 10:28&quot;, &quot;1/6/2014 10:28&quot;~
$ Subject &lt;chr&gt; &quot;Patrol schedule changes&quot;, &quot;Patrol schedule changes&quot;~</code></pre>
</div>
<p>Since both the date and the time are displayed in the same column, we shall separate these two and change their datatype accordingly.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># separating time and date</span>
<span class='va'>email_data_clean</span> <span class='op'>&lt;-</span> <span class='fu'>cSplit</span><span class='op'>(</span><span class='va'>email_data_clean</span>, splitCols<span class='op'>=</span><span class='st'>"Date"</span>,sep<span class='op'>=</span> <span class='st'>" "</span><span class='op'>)</span>

<span class='co'>#changing type of date 1,2</span>
<span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>Date_1</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>Date_1</span>,format<span class='op'>=</span><span class='st'>"%m/%d/%Y"</span><span class='op'>)</span>
<span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>Date_2</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/format.html'>format</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/strptime.html'>strptime</a></span><span class='op'>(</span><span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>Date_2</span>, format<span class='op'>=</span><span class='st'>"%H:%M"</span><span class='op'>)</span>, format <span class='op'>=</span> <span class='st'>"%H:%M"</span><span class='op'>)</span>

<span class='fu'>glimpse</span><span class='op'>(</span><span class='va'>email_data_clean</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 8,185
Columns: 5
$ From    &lt;chr&gt; &quot;Varja.Lagos@gastech.com.kronos&quot;, &quot;Varja.Lagos@gaste~
$ To      &lt;fct&gt; Hennie.Osvaldo@gastech.com.kronos, Loreto.Bodrogi@ga~
$ Subject &lt;chr&gt; &quot;Patrol schedule changes&quot;, &quot;Patrol schedule changes&quot;~
$ Date_1  &lt;date&gt; 2014-01-06, 2014-01-06, 2014-01-06, 2014-01-06, 201~
$ Date_2  &lt;chr&gt; &quot;10:28&quot;, &quot;10:28&quot;, &quot;10:28&quot;, &quot;10:35&quot;, &quot;10:35&quot;, &quot;10:35&quot;~</code></pre>
</div>
<p>The whole email id is not required. Therefore, we will remove everything after ‘#’ from both the “From” and “To” columns. For this, we use the regular expression "@.*" which specifies that everything from “@” and we use “gsub” function to repace that with and empty string.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># remove everything after @</span>
<span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>From</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>"@.*"</span>,<span class='st'>""</span>,<span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>From</span><span class='op'>)</span>
<span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>To</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>"@.*"</span>,<span class='st'>""</span>,<span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>To</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Rename the column names into meaningful names using the “colnames” function.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># rename col names</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>email_data_clean</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Source.Label"</span>, <span class='st'>"Target.Label"</span>,<span class='st'>"Subject"</span>,<span class='st'>"SentDate"</span>,<span class='st'>"SentTime"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Now formatting the employee data.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>glimpse</span><span class='op'>(</span><span class='va'>employee_data</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 54
Columns: 18
$ LastName                   &lt;chr&gt; &quot;Bramar&quot;, &quot;Ribera&quot;, &quot;Pantanal&quot;, &quot;~
$ FirstName                  &lt;chr&gt; &quot;Mat&quot;, &quot;Anda&quot;, &quot;Rachel&quot;, &quot;Linda&quot;,~
$ BirthDate                  &lt;dttm&gt; 1981-12-19, 1975-11-17, 1984-08-~
$ BirthCountry               &lt;chr&gt; &quot;Tethys&quot;, &quot;Tethys&quot;, &quot;Tethys&quot;, &quot;Te~
$ Gender                     &lt;chr&gt; &quot;Male&quot;, &quot;Female&quot;, &quot;Female&quot;, &quot;Fema~
$ CitizenshipCountry         &lt;chr&gt; &quot;Tethys&quot;, &quot;Tethys&quot;, &quot;Tethys&quot;, &quot;Te~
$ CitizenshipBasis           &lt;chr&gt; &quot;BirthNation&quot;, &quot;BirthNation&quot;, &quot;Bi~
$ CitizenshipStartDate       &lt;dttm&gt; 1981-12-19, 1975-11-17, 1984-08-~
$ PassportCountry            &lt;chr&gt; &quot;Tethys&quot;, &quot;Tethys&quot;, &quot;Tethys&quot;, &quot;Te~
$ PassportIssueDate          &lt;dttm&gt; 2007-12-12, 2009-06-15, 2013-06-~
$ PassportExpirationDate     &lt;dttm&gt; 2017-12-11, 2019-06-14, 2023-06-~
$ CurrentEmploymentType      &lt;chr&gt; &quot;Administration&quot;, &quot;Administration~
$ CurrentEmploymentTitle     &lt;chr&gt; &quot;Assistant to CEO&quot;, &quot;Assistant to~
$ CurrentEmploymentStartDate &lt;dttm&gt; 2005-07-01, 2009-10-30, 2013-10-~
$ EmailAddress               &lt;chr&gt; &quot;Mat.Bramar@gastech.com.kronos&quot;, ~
$ MilitaryServiceBranch      &lt;chr&gt; NA, NA, NA, NA, &quot;ArmedForcesOfKro~
$ MilitaryDischargeType      &lt;chr&gt; NA, NA, NA, NA, &quot;HonorableDischar~
$ MilitaryDischargeDate      &lt;dttm&gt; NA, NA, NA, NA, 1984-10-01, 2001~</code></pre>
</div>
<p>Remove unnecessary columns.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>employee_data</span><span class='op'>=</span><span class='va'>employee_data</span><span class='op'>[</span>,<span class='op'>!</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>employee_data</span><span class='op'>)</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"CitizenshipBasis"</span>,<span class='st'>"PassportCountry"</span>,<span class='st'>"BirthDate"</span>,
                                                           <span class='st'>"CitizenshipStartDate"</span>,<span class='st'>"BirthCountry"</span>,<span class='st'>"PassportIssueDate"</span>,<span class='st'>"PassportExpirationDate"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<p>Since there are no ID’s allotted for the employees, we can create a new column called “id” and populate this column with ID numbers starting from 1 to the number of rows present in the data frame. Since the “Source.Label” and “Target.Label” in the email_data are in firstname.lastname format, we will make use of the “FirstName” , “LastName” columns present in employee_data and use the “paste0” function to join then together with a “.” between them. Pay special attention to ‘Ruscella.Mies Haber’ as there exists two words in her last name so replace the space with a “.”.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># create id column</span>
<span class='va'>employee_data</span><span class='op'>$</span><span class='va'>id</span><span class='op'>=</span><span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>employee_data</span><span class='op'>)</span>

<span class='va'>employee_data</span><span class='op'>$</span><span class='va'>FullName</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>employee_data</span><span class='op'>$</span><span class='va'>FirstName</span>,<span class='st'>"."</span>,<span class='va'>employee_data</span><span class='op'>$</span><span class='va'>LastName</span><span class='op'>)</span>
<span class='va'>employee_data</span><span class='op'>$</span><span class='va'>FullName</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>employee_data</span><span class='op'>$</span><span class='va'>FullName</span><span class='op'>==</span><span class='st'>"Ruscella.Mies Haber"</span>,
                              <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>sub</a></span><span class='op'>(</span><span class='st'>" "</span>,<span class='st'>"."</span>,<span class='va'>employee_data</span><span class='op'>$</span><span class='va'>FullName</span><span class='op'>)</span>,
                              <span class='va'>employee_data</span><span class='op'>$</span><span class='va'>FullName</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Now that we have two clean data frame, we must map them together using the “match” function based.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>### mapping two df's</span>
<span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>Source</span><span class='op'>=</span><span class='va'>employee_data</span><span class='op'>$</span><span class='va'>id</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/match.html'>match</a></span><span class='op'>(</span><span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>Source.Label</span>,<span class='va'>employee_data</span><span class='op'>$</span><span class='va'>FullName</span><span class='op'>)</span><span class='op'>]</span>
<span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>Target</span><span class='op'>=</span><span class='va'>employee_data</span><span class='op'>$</span><span class='va'>id</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/match.html'>match</a></span><span class='op'>(</span><span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>Target.Label</span>,<span class='va'>employee_data</span><span class='op'>$</span><span class='va'>FullName</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<p>Remove the “.” from all names to enhanse the redability to the user.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>## remove "." from labels to make it look better</span>
<span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>Source.Label</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/grep.html'>sub</a></span><span class='op'>(</span><span class='st'>"[.]"</span>,<span class='st'>" "</span>,<span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>Source.Label</span><span class='op'>)</span>
<span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>Target.Label</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>"[.]"</span>,<span class='st'>" "</span>,<span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>Target.Label</span><span class='op'>)</span>
<span class='va'>employee_data</span><span class='op'>$</span><span class='va'>FullName</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>"[.]"</span>,<span class='st'>" "</span>,<span class='va'>employee_data</span><span class='op'>$</span><span class='va'>FullName</span><span class='op'>)</span>
<span class='fu'>glimpse</span><span class='op'>(</span><span class='va'>email_data_clean</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 8,185
Columns: 7
$ Source.Label &lt;chr&gt; &quot;Varja Lagos&quot;, &quot;Varja Lagos&quot;, &quot;Varja Lagos&quot;, &quot;B~
$ Target.Label &lt;chr&gt; &quot;Hennie Osvaldo&quot;, &quot;Loreto Bodrogi&quot;, &quot;Inga Ferro~
$ Subject      &lt;chr&gt; &quot;Patrol schedule changes&quot;, &quot;Patrol schedule cha~
$ SentDate     &lt;date&gt; 2014-01-06, 2014-01-06, 2014-01-06, 2014-01-06~
$ SentTime     &lt;chr&gt; &quot;10:28&quot;, &quot;10:28&quot;, &quot;10:28&quot;, &quot;10:35&quot;, &quot;10:35&quot;, &quot;1~
$ Source       &lt;int&gt; 45, 45, 45, 13, 13, 13, 41, 40, 39, 39, 39, 39,~
$ Target       &lt;int&gt; 48, 52, 54, 17, 14, 15, 40, 41, 3, 14, 15, 9, 1~</code></pre>
</div>
<p>Categorizing email baed on work related and non work related. Go through the data to identify the subject text for non work related emails. Using that text, we can categorize the records.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>Subject</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/chartr.html'>tolower</a></span><span class='op'>(</span><span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>Subject</span><span class='op'>)</span>

<span class='va'>nonWork</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'birthdays'</span>,<span class='st'>'plants'</span>,<span class='st'>'night'</span>,<span class='st'>'concert'</span>,<span class='st'>'coffee'</span>,<span class='st'>'sick'</span>,<span class='st'>'dress'</span>,<span class='st'>'post'</span>,<span class='st'>'funy'</span>,
    <span class='st'>'lunch'</span>,<span class='st'>'babysitting'</span>,<span class='st'>'politics'</span>,<span class='st'>'cute'</span>,<span class='st'>'parking'</span>,<span class='st'>'vacation'</span>,<span class='st'>'funny'</span>,<span class='st'>'missing'</span>,
    <span class='st'>'volunteers'</span>,<span class='st'>'nearby'</span>,<span class='st'>'club'</span>,<span class='st'>'investment'</span>,<span class='st'>'found'</span>,<span class='st'>'flowers'</span>,
    <span class='st'>'defenders'</span>,<span class='st'>'battlestations'</span>,<span class='st'>'article'</span>,<span class='st'>'ha ha'</span>,<span class='st'>'media'</span>,<span class='st'>'retirement'</span><span class='op'>)</span>

<span class='kw'>for</span> <span class='op'>(</span><span class='va'>i</span> <span class='kw'>in</span> <span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>email_data_clean</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
<span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>MainSubject</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span> <span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>email_data_clean</span><span class='op'>$</span><span class='va'>Subject</span><span class='op'>[</span><span class='va'>i</span><span class='op'>]</span>,<span class='va'>nonWork</span><span class='op'>)</span><span class='op'>)</span><span class='op'>==</span><span class='cn'>TRUE</span>,<span class='cn'>TRUE</span>,<span class='cn'>FALSE</span><span class='op'>)</span>,<span class='st'>"Non-work related"</span>,<span class='st'>"Work related"</span><span class='op'>)</span>
<span class='op'>}</span>
<span class='fu'>glimpse</span><span class='op'>(</span><span class='va'>email_data_clean</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 8,185
Columns: 8
$ Source.Label &lt;chr&gt; &quot;Varja Lagos&quot;, &quot;Varja Lagos&quot;, &quot;Varja Lagos&quot;, &quot;B~
$ Target.Label &lt;chr&gt; &quot;Hennie Osvaldo&quot;, &quot;Loreto Bodrogi&quot;, &quot;Inga Ferro~
$ Subject      &lt;chr&gt; &quot;patrol schedule changes&quot;, &quot;patrol schedule cha~
$ SentDate     &lt;date&gt; 2014-01-06, 2014-01-06, 2014-01-06, 2014-01-06~
$ SentTime     &lt;chr&gt; &quot;10:28&quot;, &quot;10:28&quot;, &quot;10:28&quot;, &quot;10:35&quot;, &quot;10:35&quot;, &quot;1~
$ Source       &lt;int&gt; 45, 45, 45, 13, 13, 13, 41, 40, 39, 39, 39, 39,~
$ Target       &lt;int&gt; 48, 52, 54, 17, 14, 15, 40, 41, 3, 14, 15, 9, 1~
$ MainSubject  &lt;chr&gt; &quot;Work related&quot;, &quot;Work related&quot;, &quot;Work related&quot;,~</code></pre>
</div>
<h3 id="storing-clean-data-into-files">4 Storing clean data into files</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://readxl.tidyverse.org'>readxl</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/colearendt/xlsx'>xlsx</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/xlsx/man/write.xlsx.html'>write.xlsx</a></span><span class='op'>(</span><span class='va'>cleaned_text</span>,<span class='st'>"data/cleanArticles.xlsx"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/write.table.html'>write.csv</a></span><span class='op'>(</span><span class='va'>employee_data</span>,<span class='st'>"data/cleanEmployee.csv"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/write.table.html'>write.csv</a></span><span class='op'>(</span><span class='va'>email_data_clean</span>,<span class='st'>"data/cleanEmail.csv"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><strong>Note:</strong> The dataframes we obtaied through the processing steps are now clean and these frames can furtehr be modified according to th eneed of visualization.</p>
<h2 id="building-the-visualization">3.0 Building the Visualization</h2>
<h3 id="relationship-between-the-news-articles">2) Relationship between the News Articles</h3>
<h4 id="text-net-visualization">Text Net Visualization</h4>
<p>The textnet is used to represent relationships between words. The first node set is words found in the newspaper articles, and the second node set is the newspapers themselves. That is, one can create a network where newspapers are connected by their use of the same words.</p>
<p><strong>Packages Required:</strong></p>
<p>The only R package presently available to implement text network techniques is the textnets package. The most current version of the textnets package is currently available on Github. To install textnets—or any other package hosted on Github— you will need the devtools package. We then install ‘textnets’ package and all the dependent packages that are required to run the ‘textnets’ package.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://devtools.r-lib.org/'>devtools</a></span><span class='op'>)</span>
<span class='fu'><a href='https://devtools.r-lib.org//reference/remote-reexports.html'>install_github</a></span><span class='op'>(</span><span class='st'>"cbail/textnets"</span><span class='op'>)</span>

<span class='va'>packages</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'textnets'</span>,<span class='st'>'dplyr'</span>,<span class='st'>'Matrix'</span>,<span class='st'>'tidytext'</span>,<span class='st'>'stringr'</span>,<span class='st'>'SnowballC'</span>,<span class='st'>'reshape2'</span>,<span class='st'>'igraph'</span>,<span class='st'>'ggraph'</span>,<span class='st'>'networkD3'</span><span class='op'>)</span>
<span class='kw'>for</span><span class='op'>(</span><span class='va'>p</span> <span class='kw'>in</span> <span class='va'>packages</span><span class='op'>)</span><span class='op'>{</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span>
  <span class='op'>}</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<p><strong>Preparing Texts:</strong></p>
<p>The textnets package requires text that is contained within a dataframe, where each row represents a document. The text of each document must be contained within a single row therefore we have to group all newspaper article based on their name and club all the articles text to one row. Since we have 29 newspapers provided, we should be having 29 rows. For this dataframe, as discussed above only the newspaper name and the content are required. Therefore, we can drop the other columns.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>cleaned_text</span><span class='op'>=</span><span class='fu'><a href='https://readxl.tidyverse.org/reference/read_excel.html'>read_excel</a></span><span class='op'>(</span><span class='st'>"data/cleanArticles.xlsx"</span><span class='op'>)</span>
<span class='va'>textNet_data</span><span class='op'>=</span><span class='va'>cleaned_text</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>newsgroup</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarise_all</span><span class='op'>(</span><span class='fu'>funs</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/toString.html'>toString</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>textNet_data</span><span class='op'>=</span><span class='va'>textNet_data</span><span class='op'>[</span>,<span class='op'>!</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>textNet_data</span><span class='op'>)</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"id"</span>,<span class='st'>"Location"</span>,<span class='st'>"Published"</span>,<span class='st'>"Title"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>]</span>
<span class='va'>textNet_data</span>
</code></pre>
</div>
<pre><code># A tibble: 29 x 3
   newsgroup     ...1                       Content                   
   &lt;chr&gt;         &lt;chr&gt;                      &lt;chr&gt;                     
 1 All News Tod~ 1, 2, 3, 4, 5, 6, 7, 8, 9~ &quot;Fifteen members of the P~
 2 Athena Speaks 19, 20, 21, 22, 23, 24, 2~ &quot;Miriam Avila, an adminis~
 3 Central Bull~ 44, 45, 46, 47, 48, 49, 5~ &quot;The Protectors of Kronos~
 4 Centrum Sent~ 65, 66, 67, 68, 69, 70, 7~ &quot;2232 - There are relatio~
 5 Daily Pegasus 101, 102, 103, 104, 105, ~ &quot;A heavy rain did not sto~
 6 Everyday News 127, 128, 129, 130, 131, ~ &quot;It is the biggest compan~
 7 Homeland Ill~ 142, 143, 144, 145, 146, ~ &quot;1018 - A fire alarm has ~
 8 Internationa~ 206, 207, 208, 209, 210, ~ &quot;Five young people were a~
 9 Internationa~ 226, 227, 228, 229, 230, ~ &quot;It is the biggest compan~
10 Kronos Star   240, 241, 242, 243, 244, ~ &quot;POK members held their a~
# ... with 19 more rows</code></pre>
</div>
<p>The PrepText function prepares texts for networks using all types of words.This function requires the user to provide four inputs:</p>
<ul>
<li><p>a dataframe that meets the requirements described above</p></li>
<li><p>the name of a column within that dataframe containing the texts that the user would like to analyze in character format (specified via the textvar argument)</p></li>
<li><p>a column within that dataframe describing the groups through which the words of those texts will be linked (specified via the groupvar argument). The groupvar argument is often some type of document identifier or the name of the author of the document (in this case newspapaer name). In network analysis terminology, the textvar and the groupvar are specifying the nodes sets of a two-mode network.</p></li>
<li><p>the PrepText function requires the user to specify which projection of the two-mode network should be created using the node_type argument. If one wishes to build a network where the nodes are words, node_type=words should be specified. If one wishes to build a network where nodes are the authors of documents or any other meta data, then node_type=groups should be used.</p></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>news_text_data</span> <span class='op'>&lt;-</span> <span class='fu'>PrepText</span><span class='op'>(</span><span class='va'>textNet_data</span>, textvar<span class='op'>=</span><span class='st'>"Content"</span>, groupvar<span class='op'>=</span><span class='st'>"newsgroup"</span>, node_type <span class='op'>=</span> <span class='st'>"groups"</span>,
                           remove_stop_words<span class='op'>=</span><span class='cn'>TRUE</span>, remove_numbers<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Once the data is converted to the required format, we pass this to a function that reads in an object created using the PrepText function and outputs a weighted adjacency matrix.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>news_text_network</span> <span class='op'>&lt;-</span> <span class='fu'>CreateTextnet</span><span class='op'>(</span><span class='va'>news_text_data</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><strong>Static Visualization:</strong></p>
<p>To visualize text networks created in the previous step we use the ‘VisTextNet’ function to create a network diagram where nodes are colored by their cluster. Text networks will be very dense because most documents share at least one word. To make text networks more readable, the visualize function requires the user to specify a prune_cut argument, which specifies which quantile of edges should be kept for the visualization. We shall set this variable to be .30 meaning that only edges that have a weight in the 30th percentile or above will be kept. The label_degree_cut specifies the degree, or number of each connections, that nodes which are labeled should have.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>VisTextNet</span><span class='op'>(</span><span class='va'>news_text_network</span>, <span class='fl'>.30</span>, label_degree_cut<span class='op'>=</span><span class='fl'>1</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visual-assignment_files/figure-html5/unnamed-chunk-42-1.png" width="624" /></p>
</div>
<p>Note that the node color corresponds to text communities (same color indicates a strong relationship between its components).</p>
<p><strong>3D Visualization:</strong></p>
<p>We can also output an interactive visualization of the text network, where the user can mouse over each node in order to reveal its node label. Once again, nodes are colored by their cluster class, and the user must specify a prune_cut argument.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>VisTextNetD3</span><span class='op'>(</span><span class='va'>news_text_network</span>, <span class='fl'>.30</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-edcafd2e5fed9c396efa" style="width:624px;height:384px;" class="forceNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-edcafd2e5fed9c396efa">{"x":{"links":{"source":[1,0,4,0,3,4,2,5,7,3,1,2,0,6,2,7,8,3,9,10,12,1,10,13,9,11,2,8,11,5,2,4,14,1,5,11,4,16,5,7,9,17,4,16,17,1,6,1,4,0,7,9,11,18,15,15,21,11,17,19,12,17,19,22,11,6,20,22,4,21,15,0,19,12,17,22,23,5,8,15,12,26,15,5,8,20,9,1,19,7,21,13,18],"target":[2,4,5,6,6,6,7,8,9,10,11,11,12,12,12,12,12,13,13,13,14,14,14,14,14,14,14,15,15,15,16,16,16,16,16,16,17,17,17,18,18,18,18,18,19,19,20,20,20,20,21,21,21,21,21,22,22,22,22,22,23,23,23,23,24,24,24,24,24,24,24,24,25,25,25,25,25,26,26,26,27,27,27,27,27,28,28,28,28,28,28,28,28],"colour":["#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666","#666"]},"nodes":{"name":["All News Today","Athena Speaks","Central Bulletin","Centrum Sentinel","Daily Pegasus","Everyday News","Homeland Illumination","International News","International Times","Kronos Star","Modern Rubicon","News Desk","News Online Today","Tethys News","The Abila Post","The Continent","The Explainer","The General Post","The Guide","The Light of Truth","The Orb","The Truth","The Tulip","The World","The Wrap","Who What News","World Journal","World Source","Worldwise"],"group":[1,3,3,2,1,5,1,6,5,2,2,3,5,2,3,5,3,4,6,4,1,6,4,4,1,4,5,5,6]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal(d3.schemeCategory20);","fontSize":7,"fontFamily":"serif","clickTextSize":17.5,"linkDistance":50,"linkWidth":"function(d) { return Math.sqrt(d.value); }","charge":-30,"opacity":0.6,"zoom":false,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":0,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<h4 id="clustering">Clustering</h4>
<p><strong>Packages Required:</strong></p>
<ul>
<li>ggwordcloud - This package is used to display the wordcloud</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>packages</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'ggwordcloud'</span><span class='op'>)</span>
<span class='kw'>for</span><span class='op'>(</span><span class='va'>p</span> <span class='kw'>in</span> <span class='va'>packages</span><span class='op'>)</span><span class='op'>{</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span>
  <span class='op'>}</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<p>From the above visualixation, the newsgroups have been divided into clusters based on strong relationship between its components. To classifying the newsgroups based on the clusters obtained, we use the TextCommunities function, which automatically uses the edge weights and determines the number of clusters within a given network. The function outputs a dataframe with the cluster or “modularity” class to which each document has been assigned.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># get text communities and plot their constituting words</span>
<span class='va'>text_communities</span> <span class='op'>&lt;-</span> <span class='fu'>TextCommunities</span><span class='op'>(</span><span class='va'>news_text_network</span><span class='op'>)</span>

<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>text_communities</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>modularity_class</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>5</span>,<span class='fl'>6</span><span class='op'>)</span><span class='op'>)</span>, 
       <span class='fu'>aes</span><span class='op'>(</span>label<span class='op'>=</span><span class='va'>group</span>, 
       color<span class='op'>=</span><span class='va'>modularity_class</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_text_wordcloud</span><span class='op'>(</span>eccentricity <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_size_area</span><span class='op'>(</span>max_size <span class='op'>=</span> <span class='fl'>15</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme_minimal</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>  
  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='op'>~</span><span class='va'>modularity_class</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visual-assignment_files/figure-html5/unnamed-chunk-45-1.png" width="624" /></p>
</div>
<p>Lets store the cluster information in a ‘cluster’ column in cleaned_text. This will make it easier to refer to clusters for future visualizations.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>cleaned_text</span><span class='op'>$</span><span class='va'>cluster</span><span class='op'>=</span><span class='va'>text_communities</span><span class='op'>$</span><span class='va'>modularity_class</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/match.html'>match</a></span><span class='op'>(</span><span class='va'>cleaned_text</span><span class='op'>$</span><span class='va'>newsgroup</span>,<span class='va'>text_communities</span><span class='op'>$</span>
<span class='va'>group</span><span class='op'>)</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<h4 id="text-plot">Text Plot</h4>
<p><strong>Packages Required:</strong></p>
<ul>
<li><p>tidytext - This package is used to convert text into a format that is visualizable with the use of ‘unnest_tokens’ function.</p></li>
<li><p>udpipe - R package provides language-agnostic tokenization, tagging, lemmatization and dependency parsing of raw text, which is an essential part in natural language processing.</p></li>
<li><p>textplot - To plot data as a text plot, we will be needing this package.</p></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>packages</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'tidytext'</span>,<span class='st'>'udpipe'</span>,<span class='st'>'textplot'</span><span class='op'>)</span>
<span class='kw'>for</span><span class='op'>(</span><span class='va'>p</span> <span class='kw'>in</span> <span class='va'>packages</span><span class='op'>)</span><span class='op'>{</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span>
  <span class='op'>}</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<p><strong>Text Plot for Cluster 1</strong></p>
<p>The word cooccurrence graph graph visualizes collections of word pair and how frequent these word pairs occur. We create a cooccurrence data frame where each row contains the word pair and how many they occur. That cooccurrence data frame will be used as the input for the textplot_cooccurrence function. After we get the correct input, now we can create the chart. We will take only the 15 most occur word pairs.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>usenet_words</span> <span class='op'>&lt;-</span> <span class='va'>cleaned_text</span> <span class='op'>%&gt;%</span>
  <span class='fu'>unnest_tokens</span><span class='op'>(</span><span class='va'>word</span>, <span class='va'>Content</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'>str_detect</span><span class='op'>(</span><span class='va'>word</span>, <span class='st'>"[a-z']$"</span><span class='op'>)</span>,
         <span class='op'>!</span><span class='va'>word</span> <span class='op'>%in%</span> <span class='va'>stop_words</span><span class='op'>$</span><span class='va'>word</span><span class='op'>)</span>

<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>usenet_words</span>, <span class='va'>cluster</span> <span class='op'>==</span> <span class='fl'>1</span><span class='op'>)</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'>cooccurrence</span><span class='op'>(</span><span class='va'>x</span>, group <span class='op'>=</span> <span class='st'>"id"</span>, term <span class='op'>=</span> <span class='st'>"word"</span><span class='op'>)</span>
<span class='co'>#x</span>
<span class='fu'>textplot_cooccurrence</span><span class='op'>(</span><span class='va'>x</span>, top_n <span class='op'>=</span> <span class='fl'>15</span>, subtitle <span class='op'>=</span> <span class='st'>"showing Cluster 1"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visual-assignment_files/figure-html5/unnamed-chunk-48-1.png" width="624" /></p>
</div>
<h4 id="wordcloud-article-titles">Wordcloud Article Titles</h4>
<p><strong>Packages Required:</strong></p>
<ul>
<li><p>tidytext - This package is used to convert text into a format that is visualizable with the use of ‘unnest_tokens’ function.</p></li>
<li><p>tm - This packages has built in functions such as removeStopwords.</p></li>
<li><p>wordcloud - The comparison cloud is developed using this package.</p></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>packages</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'tidytext'</span>,<span class='st'>'tm'</span>,<span class='st'>'wordcloud'</span><span class='op'>)</span>
<span class='kw'>for</span><span class='op'>(</span><span class='va'>p</span> <span class='kw'>in</span> <span class='va'>packages</span><span class='op'>)</span><span class='op'>{</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span>
  <span class='op'>}</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<p><strong>Wordcloud for Titles in Cluster 5</strong></p>
<p>To build a wordcloud, we first need to have the proper data. Therefore, we first extract the required data fom cleande_text and filter it based on the criteria “cluster =5”. This values should be changes when we want to visualize other clusters. Afetr we extract the required data, we need to clean it by removing punctuation, digits and stopwords. All of these can be removed by using regular expression as stated in the code chunk below.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>title_data</span><span class='op'>=</span><span class='va'>cleaned_text</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>newsgroup</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>cluster</span><span class='op'>==</span><span class='fl'>5</span><span class='op'>)</span><span class='op'>%&gt;%</span>
  <span class='fu'>summarise_all</span><span class='op'>(</span><span class='fu'>funs</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/toString.html'>toString</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/na.fail.html'>na.omit</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>corpus2</span><span class='op'>=</span><span class='va'>title_data</span><span class='op'>$</span><span class='va'>Title</span>

<span class='co'>#punctuation removal</span>
<span class='va'>corpus2</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span>pattern<span class='op'>=</span><span class='st'>"\\W"</span>,replace<span class='op'>=</span><span class='st'>" "</span>,<span class='va'>corpus2</span><span class='op'>)</span>
<span class='co'>#digits removal</span>
<span class='va'>corpus2</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span>pattern<span class='op'>=</span><span class='st'>"\\d"</span>,replace<span class='op'>=</span><span class='st'>" "</span>,<span class='va'>corpus2</span><span class='op'>)</span>
<span class='co'>#stopwords</span>
<span class='va'>corpus2</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/chartr.html'>tolower</a></span><span class='op'>(</span><span class='va'>corpus2</span><span class='op'>)</span>
<span class='va'>corpus2</span><span class='op'>=</span><span class='fu'>removeWords</span><span class='op'>(</span><span class='va'>corpus2</span>,<span class='fu'>stopwords</span><span class='op'>(</span><span class='st'>"english"</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'>#remove single letters</span>
<span class='va'>corpus2</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span>pattern<span class='op'>=</span><span class='st'>"\\b[A-z]\\b{1}"</span>,replace<span class='op'>=</span><span class='st'>" "</span>,<span class='va'>corpus2</span><span class='op'>)</span>
<span class='co'>#remove white space</span>
<span class='va'>corpus2</span><span class='op'>=</span><span class='fu'>stripWhitespace</span><span class='op'>(</span><span class='va'>corpus2</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>After we have obtained the clean data, we will have convert corpus to Term Document matrix. Terms are words in the corpus as rows and documents as columns. The values of the matrix will be the frequency which states how many time a word appeared in a document. When we print the resultant object, it specifies how sparse the matrix is and the number of terms and documents present. Since cluster 5 has 6 newsgroups, the number of documents must also be 6.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>corpus3</span><span class='op'>=</span><span class='fu'>Corpus</span><span class='op'>(</span><span class='fu'>VectorSource</span><span class='op'>(</span><span class='va'>corpus2</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>tdm</span><span class='op'>=</span><span class='fu'>TermDocumentMatrix</span><span class='op'>(</span><span class='va'>corpus3</span><span class='op'>)</span>
<span class='va'>tdm</span>
</code></pre>
</div>
<pre><code>&lt;&lt;TermDocumentMatrix (terms: 375, documents: 6)&gt;&gt;
Non-/sparse entries: 639/1611
Sparsity           : 72%
Maximal term length: 15
Weighting          : term frequency (tf)</code></pre>
</div>
<p>We will now convert the term document matrix to matrix format and rename the document names to the respective newsgroup. As for the comparison.cloud function, there are multiple parameters that can be set as per requirements. For our purpose, we will set the higher frequency words to be in the center and for it we shall set random.order=FALSE. The maximum number of words that can be displayed is set to 300 and the size and color of the title is set to a suitable value as show below.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='http://blog.fellstat.com/?cat=11'>"wordcloud"</a></span><span class='op'>)</span>
<span class='va'>m</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='va'>tdm</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span><span class='op'>(</span><span class='va'>m</span><span class='op'>)</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>title_data</span><span class='op'>$</span><span class='va'>newsgroup</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/wordcloud/man/comparison.cloud.html'>comparison.cloud</a></span><span class='op'>(</span><span class='va'>m</span>,max.words <span class='op'>=</span> <span class='fl'>300</span>,random.order<span class='op'>=</span><span class='cn'>FALSE</span>,colors<span class='op'>=</span><span class='fu'>brewer.pal</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>ncol</a></span><span class='op'>(</span><span class='va'>m</span><span class='op'>)</span><span class='op'>)</span>,<span class='st'>"Dark2"</span><span class='op'>)</span> ,title.size<span class='op'>=</span><span class='fl'>1</span>,
  title.colors<span class='op'>=</span><span class='cn'>NULL</span>, match.colors<span class='op'>=</span><span class='cn'>FALSE</span>,
  title.bg.colors<span class='op'>=</span><span class='st'>"grey90"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visual-assignment_files/figure-html5/unnamed-chunk-52-1.png" width="624" /></p>
</div>
<h4 id="timeline-of-articles">Timeline of Articles</h4>
<p>Since the data we have cleaned for the articles also contains the published date, we can make use of the column to visualize how events have been unfolding across the years by means of a timeline.</p>
<p><strong>Packages Required:</strong></p>
<ul>
<li><p>ggplot2 - Used for plotting graphs</p></li>
<li><p>lattice - Used to plot bar chart</p></li>
<li><p>knitr - Used to display the dataframes in a proper way</p></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>packages</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'dplyr'</span>,<span class='st'>'ggplot2'</span>,<span class='st'>'udpipe'</span>,<span class='st'>'lattice'</span>,<span class='st'>'knitr'</span><span class='op'>)</span>
<span class='kw'>for</span><span class='op'>(</span><span class='va'>p</span> <span class='kw'>in</span> <span class='va'>packages</span><span class='op'>)</span><span class='op'>{</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span>
  <span class='op'>}</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<p>Plotting to understand how the frequency of headlines is:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>news</span><span class='op'>=</span><span class='va'>cleaned_text</span>
<span class='va'>news</span> <span class='op'>%&gt;%</span> <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>Published</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>count</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>arrange</span><span class='op'>(</span><span class='fu'>desc</span><span class='op'>(</span><span class='va'>n</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code># A tibble: 222 x 2
# Groups:   Published [222]
   Published               n
   &lt;dttm&gt;              &lt;int&gt;
 1 2014-01-20 00:00:00   222
 2 2014-01-21 00:00:00    43
 3 2014-01-19 00:00:00    18
 4 2009-06-21 00:00:00    11
 5 2009-03-13 00:00:00     9
 6 2012-06-21 00:00:00     9
 7 2013-12-16 00:00:00     9
 8 2010-06-21 00:00:00     8
 9 2012-06-20 00:00:00     8
10 2005-04-06 00:00:00     7
# ... with 212 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>news</span> <span class='op'>%&gt;%</span> <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>Published</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>count</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>ggplot</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'>geom_line</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='va'>Published</span>,<span class='va'>n</span>, group <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visual-assignment_files/figure-html5/unnamed-chunk-54-1.png" width="624" /></p>
</div>
<p>Before we move on to perform text analysis let’s split year from Published date.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#Extract only year</span>
<span class='va'>news</span><span class='op'>$</span><span class='va'>year</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/format.html'>format</a></span><span class='op'>(</span><span class='va'>news</span><span class='op'>$</span><span class='va'>Published</span>, <span class='st'>"%Y"</span><span class='op'>)</span>
<span class='va'>years</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/sort.html'>sort</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>news</span><span class='op'>$</span><span class='va'>year</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>years</span>
</code></pre>
</div>
<pre><code> [1] &quot;1982&quot; &quot;1984&quot; &quot;1992&quot; &quot;1993&quot; &quot;1994&quot; &quot;1995&quot; &quot;1996&quot; &quot;1997&quot; &quot;1998&quot;
[10] &quot;1999&quot; &quot;2000&quot; &quot;2001&quot; &quot;2002&quot; &quot;2003&quot; &quot;2004&quot; &quot;2005&quot; &quot;2007&quot; &quot;2009&quot;
[19] &quot;2010&quot; &quot;2011&quot; &quot;2012&quot; &quot;2013&quot; &quot;2014&quot;</code></pre>
</div>
<p>Udpipe Package provides pretrained language models for respective languages and we can download the required model using udpipe_load_model function. This will automatically convert the text into clean text.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>model</span> <span class='op'>&lt;-</span> <span class='fu'>udpipe_download_model</span><span class='op'>(</span>language <span class='op'>=</span> <span class='st'>"english"</span><span class='op'>)</span>
<span class='va'>udmodel_english</span> <span class='op'>&lt;-</span> <span class='fu'>udpipe_load_model</span><span class='op'>(</span><span class='va'>model</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Filtering data only for 2009. The udpipe_annotate() function takes the language model and annoates the given text data. This is a function that is within the ‘udpipe’ package. We then convert this object to a dataframe. TOP NOUN — VERB Pairs as Keyword pairs: In English (or probably in many languages), Simple a noun and a verb can form a phrase. Like, Dog barked — with the noun Dog and Barked, we can understand the context of the sentence. Reverse-engineering the same with this titles data, let us bring out top phrases - that are just keywords/topics</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>news_more</span> <span class='op'>&lt;-</span> <span class='va'>news</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>year</span> <span class='op'>==</span> <span class='fl'>2009</span><span class='op'>)</span>
<span class='va'>s</span> <span class='op'>&lt;-</span> <span class='fu'>udpipe_annotate</span><span class='op'>(</span><span class='va'>udmodel_english</span>, <span class='va'>news_more</span><span class='op'>$</span><span class='va'>Title</span><span class='op'>)</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='va'>s</span><span class='op'>)</span>


<span class='co'>## Using a sequence of POS tags (noun phrases / verb phrases)</span>
<span class='va'>x</span><span class='op'>$</span><span class='va'>phrase_tag</span> <span class='op'>&lt;-</span> <span class='fu'>as_phrasemachine</span><span class='op'>(</span><span class='va'>x</span><span class='op'>$</span><span class='va'>upos</span>, type <span class='op'>=</span> <span class='st'>"upos"</span><span class='op'>)</span>
<span class='va'>stats</span> <span class='op'>&lt;-</span> <span class='fu'>keywords_phrases</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>x</span><span class='op'>$</span><span class='va'>phrase_tag</span>, term <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/chartr.html'>tolower</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>$</span><span class='va'>token</span><span class='op'>)</span>, 
                          pattern <span class='op'>=</span> <span class='st'>"(A|N)*N(P+D*(A|N)*N)*"</span>, 
                          is_regex <span class='op'>=</span> <span class='cn'>TRUE</span>, detailed <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='va'>stats</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>stats</span>, <span class='va'>ngram</span> <span class='op'>&gt;</span> <span class='fl'>1</span> <span class='op'>&amp;</span> <span class='va'>freq</span> <span class='op'>&gt;</span> <span class='fl'>3</span><span class='op'>)</span>
<span class='va'>stats</span><span class='op'>$</span><span class='va'>key</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>stats</span><span class='op'>$</span><span class='va'>keyword</span>, levels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rev.html'>rev</a></span><span class='op'>(</span><span class='va'>stats</span><span class='op'>$</span><span class='va'>keyword</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>barchart</span><span class='op'>(</span><span class='va'>key</span> <span class='op'>~</span> <span class='va'>freq</span>, data <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>stats</span>, <span class='fl'>20</span><span class='op'>)</span>, col <span class='op'>=</span> <span class='st'>"magenta"</span>, 
         main <span class='op'>=</span> <span class='st'>"Keywords - simple noun phrases"</span>, xlab <span class='op'>=</span> <span class='st'>"Frequency"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visual-assignment_files/figure-html5/unnamed-chunk-57-1.png" width="624" /></p>
</div>
<p>We can re run the above chuck of code by changing the filter criteria “year==” and replace it with all the years we have. And after running the plot each time , we extract the 1st keyword pair which is the highest frequency and store it into a list called ‘keywords’.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#keywords=append(keywords,stats$keyword[1])</span>
</code></pre>
</div>
</div>
<p>When we run the barplot for all available years and store the 1st keyword, we should be getting the below values.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>keywords</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='st'>"central role"</span>, <span class='st'>"mediterranean sea"</span>,<span class='st'>"foreign investment"</span>,<span class='st'>"foreign investment"</span>,<span class='st'>"shores of kronos"</span>,<span class='st'>"grand opening"</span>,<span class='st'>"gas fields"</span>,<span class='st'>"elodis possible contamination"</span>,<span class='st'>"public health"</span>,<span class='st'>"minister of health"</span>,<span class='st'>"president kapelou"</span>,<span class='st'>"taxes on oil"</span>,<span class='st'>"public health"</span>,<span class='st'>"hank fluss"</span>,<span class='st'>"public health"</span>,<span class='cn'>NA</span>,<span class='st'>"near elodis"</span>,<span class='st'>"leader karel"</span>,<span class='st'>"anniversary of protests"</span>,<span class='st'>"public threat"</span>,<span class='st'>"presidential manor"</span>,<span class='st'>"ipo makes"</span>,<span class='st'>"scene blog"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Next, we shall creat another list that consists of events that explain the keywords and then we will unlist bothe the keywords and event list and create a dataframe with years,keywords and event.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>event</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='st'>"Before Opening"</span>,<span class='st'>"Before Opening"</span>,<span class='st'>"Before Opening"</span>,<span class='st'>"Before Opening"</span>,<span class='st'>"Before Opening"</span>,<span class='st'>"Contamination"</span>,<span class='st'>"Contamination"</span>,<span class='st'>"Contamination"</span>,<span class='st'>"Health  Impact"</span>,<span class='st'>"Health  Impact"</span>,<span class='st'>"Health  Impact"</span>,<span class='st'>"Health  Impact"</span>,<span class='st'>"Health  Impact"</span>,<span class='st'>"Health  Impact"</span>,<span class='st'>"Health  Impact"</span>,<span class='st'>"Health  Impact"</span>,<span class='st'>"Protests"</span>,<span class='st'>"Protests"</span>,<span class='st'>"Protests"</span>,<span class='st'>"Protests"</span>,<span class='st'>"Protests"</span>,<span class='st'>"Protests"</span>,<span class='st'>"Protests"</span><span class='op'>)</span>

<span class='va'>keywords</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='va'>keywords</span>, use.names<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>
<span class='va'>event</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/unlist.html'>unlist</a></span><span class='op'>(</span><span class='va'>event</span>, use.names<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>

<span class='va'>timeline</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span><span class='va'>years</span>,<span class='va'>keywords</span>,<span class='va'>event</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Then, we will assign colors for appropriate groupings of all the uniques values in ‘event’ so our events will be color coded by type of keyword.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Add a specified order to these event type labeles</span>
<span class='va'>Event_type_levels</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Before Opening"</span>,<span class='st'>"Contamination"</span> ,<span class='st'>"Health  Impact"</span>,<span class='st'>"Protests"</span><span class='op'>)</span>

<span class='co'># Define the colors for the event types in the specified order</span>
<span class='va'>Event_type_colors</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"#0070C0"</span>, <span class='st'>"#FFC000"</span>,  <span class='st'>"#00B050"</span>, <span class='st'>"#C00000"</span><span class='op'>)</span>

<span class='co'># Make the Event_type vector a factor using the levels we defined above</span>
<span class='va'>timeline</span><span class='op'>$</span><span class='va'>event</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>timeline</span><span class='op'>$</span><span class='va'>event</span>, levels<span class='op'>=</span> <span class='va'>Event_type_levels</span>, ordered<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Each keyword on the timeline will need to be positioned carefully. We will vary the height or direction on the timeline keywords to avoid overlapping or overcrowded text descriptions. Then, we shall merge these variables to the timeline dataframe and call the new dataframe as ‘Merkel’.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Set the heights we will use for our keywords.</span>
<span class='va'>positions</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.5</span>, <span class='op'>-</span><span class='fl'>0.5</span>, <span class='fl'>1.0</span>, <span class='op'>-</span><span class='fl'>1.0</span>, <span class='fl'>1.25</span>, <span class='op'>-</span><span class='fl'>1.25</span>, <span class='fl'>1.5</span>, <span class='op'>-</span><span class='fl'>1.5</span>, <span class='fl'>1.75</span>, <span class='op'>-</span><span class='fl'>1.75</span><span class='op'>)</span> 

<span class='co'># Set the directions we will use for our keyword, for example above and below.</span>
<span class='va'>directions</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='op'>-</span><span class='fl'>1</span><span class='op'>)</span> 


<span class='co'># Assign the positions &amp; directions to each date from those set above.</span>
<span class='va'>line_pos</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>
    <span class='st'>"years"</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>timeline</span><span class='op'>$</span><span class='va'>years</span><span class='op'>)</span>,
    <span class='st'>"position"</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='va'>positions</span>, length.out<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>timeline</span><span class='op'>$</span><span class='va'>years</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>,
    <span class='st'>"direction"</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='va'>directions</span>, length.out<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>timeline</span><span class='op'>$</span><span class='va'>years</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>


<span class='co'># Create columns with the specified positions and directions for each milestone event</span>
<span class='va'>Merkel</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/merge.html'>merge</a></span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>timeline</span>, y<span class='op'>=</span><span class='va'>line_pos</span>, by<span class='op'>=</span><span class='st'>"years"</span>, all <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> 
<span class='co'># Let's view the new columns.</span>
<span class='fu'>kable</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>Merkel</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">years</th>
<th style="text-align: left;">keywords</th>
<th style="text-align: left;">event</th>
<th style="text-align: right;">position</th>
<th style="text-align: right;">direction</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1982</td>
<td style="text-align: left;">central role</td>
<td style="text-align: left;">Before Opening</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">1984</td>
<td style="text-align: left;">mediterranean sea</td>
<td style="text-align: left;">Before Opening</td>
<td style="text-align: right;">-0.50</td>
<td style="text-align: right;">-1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1992</td>
<td style="text-align: left;">foreign investment</td>
<td style="text-align: left;">Before Opening</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">1993</td>
<td style="text-align: left;">foreign investment</td>
<td style="text-align: left;">Before Opening</td>
<td style="text-align: right;">-1.00</td>
<td style="text-align: right;">-1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1994</td>
<td style="text-align: left;">shores of kronos</td>
<td style="text-align: left;">Before Opening</td>
<td style="text-align: right;">1.25</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">1995</td>
<td style="text-align: left;">grand opening</td>
<td style="text-align: left;">Contamination</td>
<td style="text-align: right;">-1.25</td>
<td style="text-align: right;">-1</td>
</tr>
</tbody>
</table>
</div>
<p><strong>We are ready to plot our timeline now!</strong> <strong>Step 1:</strong> We first start by creating a plan chart consisting of our x and y coordinates and the labels. Then we will set the background to be plain by using the classic theme.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Create timeline coordinates with an x and y axis</span>
<span class='va'>timeline_plot</span><span class='op'>&lt;-</span><span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>Merkel</span>,<span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>years</span>,y<span class='op'>=</span> <span class='va'>position</span>, col<span class='op'>=</span><span class='va'>event</span>, label<span class='op'>=</span><span class='va'>Merkel</span><span class='op'>$</span><span class='va'>keywords</span><span class='op'>)</span><span class='op'>)</span> 

<span class='co'># Add the label keywords</span>
<span class='va'>timeline_plot</span><span class='op'>&lt;-</span><span class='va'>timeline_plot</span><span class='op'>+</span><span class='fu'>labs</span><span class='op'>(</span>col<span class='op'>=</span><span class='st'>"keywords"</span><span class='op'>)</span> 

<span class='co'># Assigning the colors and order to the keywords</span>
<span class='va'>timeline_plot</span><span class='op'>&lt;-</span><span class='va'>timeline_plot</span><span class='op'>+</span><span class='fu'>scale_color_manual</span><span class='op'>(</span>values<span class='op'>=</span><span class='va'>Event_type_colors</span>, labels<span class='op'>=</span><span class='va'>Event_type_levels</span>, drop <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> 

<span class='co'># Using the classic theme to remove background gray</span>
<span class='va'>timeline_plot</span><span class='op'>&lt;-</span><span class='va'>timeline_plot</span><span class='op'>+</span><span class='fu'>theme_classic</span><span class='op'>(</span><span class='op'>)</span> 

<span class='co'># Plot a horizontal line at y=0 for the timeline</span>
<span class='va'>timeline_plot</span><span class='op'>&lt;-</span><span class='va'>timeline_plot</span><span class='op'>+</span><span class='fu'>geom_hline</span><span class='op'>(</span>yintercept<span class='op'>=</span><span class='fl'>0</span>, 
                color <span class='op'>=</span> <span class='st'>"black"</span>, size<span class='op'>=</span><span class='fl'>0.3</span><span class='op'>)</span>

<span class='co'># Print plot</span>
<span class='va'>timeline_plot</span>
</code></pre>
</div>
<p><img src="visual-assignment_files/figure-html5/unnamed-chunk-63-1.png" width="624" /></p>
</div>
<p><strong>Step 2:</strong> Now that we have the plain chart ready, we will now add vertical points where the keywords should come in. These lines are placed by making use of the position values we created previously. The legend it set to be at the bottom to enhance the redability.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Plot the vertical lines for our timeline's milestone events</span>
<span class='va'>timeline_plot</span><span class='op'>&lt;-</span><span class='va'>timeline_plot</span><span class='op'>+</span><span class='fu'>geom_segment</span><span class='op'>(</span>data<span class='op'>=</span><span class='va'>Merkel</span>, <span class='fu'>aes</span><span class='op'>(</span>y<span class='op'>=</span><span class='va'>Merkel</span><span class='op'>$</span><span class='va'>position</span>,yend<span class='op'>=</span><span class='fl'>0</span>,xend<span class='op'>=</span><span class='va'>Merkel</span><span class='op'>$</span><span class='va'>years</span><span class='op'>)</span>, color<span class='op'>=</span><span class='st'>'black'</span>, size<span class='op'>=</span><span class='fl'>0.2</span><span class='op'>)</span> 


<span class='co'># Now let's plot the scatter points at the tips of the vertical lines and date</span>
<span class='va'>timeline_plot</span><span class='op'>&lt;-</span><span class='va'>timeline_plot</span><span class='op'>+</span><span class='fu'>geom_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>y<span class='op'>=</span><span class='va'>Merkel</span><span class='op'>$</span><span class='va'>position</span><span class='op'>)</span>, size<span class='op'>=</span><span class='fl'>3</span><span class='op'>)</span> 

<span class='co'># Let's remove the axis since this is a horizontal timeline and postion the legend to the bottom</span>
<span class='va'>timeline_plot</span><span class='op'>&lt;-</span><span class='va'>timeline_plot</span><span class='op'>+</span><span class='fu'>theme</span><span class='op'>(</span>axis.line.y<span class='op'>=</span><span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
                 axis.text.y<span class='op'>=</span><span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
                 axis.title.x<span class='op'>=</span><span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
                 axis.title.y<span class='op'>=</span><span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
                 axis.ticks.y<span class='op'>=</span><span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
                 axis.text.x <span class='op'>=</span><span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
                 axis.ticks.x <span class='op'>=</span><span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
                 axis.line.x <span class='op'>=</span><span class='fu'>element_blank</span><span class='op'>(</span><span class='op'>)</span>,
                 legend.position <span class='op'>=</span> <span class='st'>"bottom"</span>
                <span class='op'>)</span> 
<span class='co'># Print plot</span>
<span class='va'>timeline_plot</span>
</code></pre>
</div>
<p><img src="visual-assignment_files/figure-html5/unnamed-chunk-64-1.png" width="624" /></p>
</div>
<p><strong>Step 3</strong>: Next, we will add years to the x axis. We will include two additional years at the start and end of the axis so that all the keywords will be redabe in the chatrt and wont be cut off.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>years</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/append.html'>append</a></span><span class='op'>(</span><span class='va'>years</span>, <span class='fl'>1981</span>, <span class='fl'>0</span><span class='op'>)</span>
<span class='va'>years</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/append.html'>append</a></span><span class='op'>(</span><span class='va'>years</span>, <span class='fl'>2015</span><span class='op'>)</span>
<span class='va'>years</span>
</code></pre>
</div>
<pre><code> [1] &quot;1981&quot; &quot;1982&quot; &quot;1984&quot; &quot;1992&quot; &quot;1993&quot; &quot;1994&quot; &quot;1995&quot; &quot;1996&quot; &quot;1997&quot;
[10] &quot;1998&quot; &quot;1999&quot; &quot;2000&quot; &quot;2001&quot; &quot;2002&quot; &quot;2003&quot; &quot;2004&quot; &quot;2005&quot; &quot;2007&quot;
[19] &quot;2009&quot; &quot;2010&quot; &quot;2011&quot; &quot;2012&quot; &quot;2013&quot; &quot;2014&quot; &quot;2015&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Let's add the years</span>
<span class='va'>timeline_plot</span><span class='op'>&lt;-</span><span class='va'>timeline_plot</span><span class='op'>+</span><span class='fu'>geom_text</span><span class='op'>(</span>data<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>years</span><span class='op'>)</span>, <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>years</span>,y<span class='op'>=</span><span class='op'>-</span><span class='fl'>0.25</span>,label<span class='op'>=</span><span class='va'>years</span>, fontface<span class='op'>=</span><span class='st'>"bold"</span><span class='op'>)</span>,size<span class='op'>=</span><span class='fl'>2.5</span>, color<span class='op'>=</span><span class='st'>'black'</span><span class='op'>)</span> 
</code></pre>
</div>
</div>
<p><strong>Step 4:</strong> We need to add the labels of each keyword now. To do this we have to define the text position. A clean timeline should have the labels situated a bit above the scatter points. Since we have the positions of the points already defined, we will place the labels 0.2 pts away from the scatter points.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Lets offset the labels 0.2 away from scatter points</span>
<span class='va'>text_offset</span> <span class='op'>&lt;-</span> <span class='fl'>0.2</span> 

<span class='co'># Let's use the absolute value since we want to add the text_offset and increase space away from the scatter points </span>
<span class='va'>absolute_value</span><span class='op'>&lt;-</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span><span class='op'>(</span><span class='va'>Merkel</span><span class='op'>$</span><span class='va'>position</span><span class='op'>)</span><span class='op'>)</span> 
<span class='va'>text_position</span><span class='op'>&lt;-</span> <span class='va'>absolute_value</span> <span class='op'>+</span> <span class='va'>text_offset</span>

<span class='co'># Let's keep the direction above or below for the labels to match the scatter points</span>
<span class='va'>Merkel</span><span class='op'>$</span><span class='va'>text_position</span><span class='op'>&lt;-</span> <span class='va'>text_position</span> <span class='op'>*</span> <span class='va'>Merkel</span><span class='op'>$</span><span class='va'>direction</span> 

<span class='co'># View head of the table</span>
<span class='fu'>kable</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>Merkel</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">years</th>
<th style="text-align: left;">keywords</th>
<th style="text-align: left;">event</th>
<th style="text-align: right;">position</th>
<th style="text-align: right;">direction</th>
<th style="text-align: right;">text_position</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1982</td>
<td style="text-align: left;">central role</td>
<td style="text-align: left;">Before Opening</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.70</td>
</tr>
<tr class="even">
<td style="text-align: left;">1984</td>
<td style="text-align: left;">mediterranean sea</td>
<td style="text-align: left;">Before Opening</td>
<td style="text-align: right;">-0.50</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-0.70</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1992</td>
<td style="text-align: left;">foreign investment</td>
<td style="text-align: left;">Before Opening</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.20</td>
</tr>
<tr class="even">
<td style="text-align: left;">1993</td>
<td style="text-align: left;">foreign investment</td>
<td style="text-align: left;">Before Opening</td>
<td style="text-align: right;">-1.00</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-1.20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1994</td>
<td style="text-align: left;">shores of kronos</td>
<td style="text-align: left;">Before Opening</td>
<td style="text-align: right;">1.25</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.45</td>
</tr>
<tr class="even">
<td style="text-align: left;">1995</td>
<td style="text-align: left;">grand opening</td>
<td style="text-align: left;">Contamination</td>
<td style="text-align: right;">-1.25</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-1.45</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Step 5:</strong> For the final step, we can add the labels to the timeline for our keywords and display the timeline.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>timeline_plot</span><span class='op'>&lt;-</span><span class='va'>timeline_plot</span><span class='op'>+</span><span class='fu'>geom_text</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>y<span class='op'>=</span><span class='va'>Merkel</span><span class='op'>$</span><span class='va'>text_position</span>,label<span class='op'>=</span><span class='va'>Merkel</span><span class='op'>$</span><span class='va'>keywords</span><span class='op'>)</span>,size<span class='op'>=</span><span class='fl'>3.5</span>, vjust<span class='op'>=</span><span class='fl'>0.6</span><span class='op'>)</span>

<span class='co'># Print plot</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>timeline_plot</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visual-assignment_files/figure-html5/unnamed-chunk-67-1.png" width="624" /></p>
</div>
<p>The above timeline plot is extremely useful and easily understandable if we have data based on dates. This plot helps us understand how events have been unfolding through the years, months or dates.</p>
<h3 id="visualizing-email-network">3) Visualizing Email Network</h3>
<p><strong>Packages Required</strong></p>
<p>The purpose for requiring the packages are:</p>
<ul>
<li><p>lubridate - The ‘wday’ function which converts date to a weekday belongs to this package.</p></li>
<li><p>tidygraph - ‘tbl_graph’ function which converts data to an object to display network belons to this package.</p></li>
<li><p>ggraph - Plotting of the network object happens via this package.</p></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>packages</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'lubridate'</span>,<span class='st'>'tidygraph'</span>,<span class='st'>'ggraph'</span><span class='op'>)</span>
<span class='kw'>for</span><span class='op'>(</span><span class='va'>p</span> <span class='kw'>in</span> <span class='va'>packages</span><span class='op'>)</span><span class='op'>{</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span>
  <span class='op'>}</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<p>For easier understanding, lets save our clean email data as “edges” and employee data as “nodes”. For simplified analysis, we shall add another variable to "edges’ and call it Weekday that will mention the day of the week the email was sent. For this, we make use of the ‘wday’ function that is part of the ‘lubridate’ package. Set ‘label=true’ to display as ‘Monday, Tuesday, etc’ instead of ‘1,2 3,etc’ and setting ‘abbr=false’ will spell days in full form.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>edges</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.csv</a></span><span class='op'>(</span><span class='st'>"data/cleanEmail.csv"</span><span class='op'>)</span>
<span class='va'>nodes</span><span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.csv</a></span><span class='op'>(</span><span class='st'>"data/cleanEmployee.csv"</span><span class='op'>)</span>
<span class='va'>edges</span><span class='op'>$</span><span class='va'>Weekday</span><span class='op'>=</span> <span class='fu'>wday</span><span class='op'>(</span><span class='va'>edges</span><span class='op'>$</span><span class='va'>SentDate</span>, label<span class='op'>=</span><span class='cn'>TRUE</span>,abbr<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Next, let’s create an aggregated edges that consists of a new variable called “Weight” which holds the count on how many times source sends email to target. for the first aggregate, we shall group by sent date and for the second, we shall group by the Weekday variable that we created earlier.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>edges_aggregated1</span><span class='op'>=</span><span class='va'>edges</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>Source</span>,<span class='va'>Target</span>,<span class='va'>SentDate</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarise</span><span class='op'>(</span>Weight<span class='op'>=</span><span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Weight</span> <span class='op'>&gt;</span><span class='fl'>1</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>glimpse</span><span class='op'>(</span><span class='va'>edges_aggregated1</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 1,663
Columns: 4
$ Source   &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, ~
$ Target   &lt;int&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, ~
$ SentDate &lt;chr&gt; &quot;2014-01-06&quot;, &quot;2014-01-07&quot;, &quot;2014-01-08&quot;, &quot;2014-01-~
$ Weight   &lt;int&gt; 2, 4, 3, 6, 5, 5, 4, 2, 5, 2, 4, 3, 6, 5, 5, 4, 2, ~</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>edges_aggregated2</span><span class='op'>=</span><span class='va'>edges</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>Source</span>,<span class='va'>Target</span>,<span class='va'>Weekday</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>summarise</span><span class='op'>(</span>Weight<span class='op'>=</span><span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>Weight</span> <span class='op'>&gt;</span><span class='fl'>1</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ungroup</span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'>glimpse</span><span class='op'>(</span><span class='va'>edges_aggregated2</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Rows: 1,901
Columns: 4
$ Source  &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1~
$ Target  &lt;int&gt; 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5~
$ Weekday &lt;ord&gt; Monday, Tuesday, Wednesday, Thursday, Friday, Monday~
$ Weight  &lt;int&gt; 7, 9, 7, 3, 11, 7, 9, 7, 3, 11, 7, 9, 7, 3, 11, 7, 9~</code></pre>
</div>
<p>Now that we have the aggregated edges, we have to create a wrapper to build the graph model. This can be done using the ‘tbl_graph’ function present in the ‘tidygraph’ package.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>network_graph1</span> <span class='op'>=</span> <span class='fu'>tbl_graph</span><span class='op'>(</span>nodes<span class='op'>=</span><span class='va'>nodes</span>, edges<span class='op'>=</span><span class='va'>edges_aggregated1</span>,
                          directed<span class='op'>=</span><span class='cn'>TRUE</span>  <span class='op'>)</span>
<span class='va'>network_graph2</span> <span class='op'>=</span> <span class='fu'>tbl_graph</span><span class='op'>(</span>nodes<span class='op'>=</span><span class='va'>nodes</span>, edges<span class='op'>=</span><span class='va'>edges_aggregated2</span>,
                          directed<span class='op'>=</span><span class='cn'>TRUE</span>  <span class='op'>)</span>
</code></pre>
</div>
</div>
<p>The network graphs we created consists of 3 parts 1) layout: the layout you want to use 2) The aesthetics for edges 3) The aesthetics for nodes</p>
<p>For all these, we make use of the ‘ggraph’ package. We use ‘theme_graph’ to modify the background color. The node and edge color can be changed by specifying the colour in the aes() method under the variable ‘colour’. We can also add other parameters such as the layout type and also color the nodes based on the employment category so as to understand the connectivity between various employment categories.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>g</span> <span class='op'>&lt;-</span> <span class='fu'>ggraph</span><span class='op'>(</span><span class='va'>network_graph1</span>, 
            layout <span class='op'>=</span> <span class='st'>"nicely"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_edge_link</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_node_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>CurrentEmploymentType</span>, 
                      size <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>g</span> <span class='op'>+</span> <span class='fu'>theme_graph</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visual-assignment_files/figure-html5/unnamed-chunk-73-1.png" width="624" /></p>
</div>
<p>In the code chunk below, the thickness of the edges will be mapped with the Weight variable. So the thicker the edge, the more emails passed between the two nodes.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>g</span> <span class='op'>&lt;-</span> <span class='fu'>ggraph</span><span class='op'>(</span><span class='va'>network_graph1</span>, 
            layout <span class='op'>=</span> <span class='st'>"nicely"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_edge_link</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>width<span class='op'>=</span><span class='va'>Weight</span><span class='op'>)</span>, 
                 alpha<span class='op'>=</span><span class='fl'>0.2</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_edge_width</span><span class='op'>(</span>range <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.1</span>, <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_node_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>CurrentEmploymentType</span><span class='op'>)</span>, 
                  size <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
<span class='va'>g</span> <span class='op'>+</span> <span class='fu'>theme_graph</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visual-assignment_files/figure-html5/unnamed-chunk-74-1.png" width="624" /></p>
</div>
<p>Using facet edge to separate the network based on the the send date.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>g</span> <span class='op'>&lt;-</span> <span class='fu'>ggraph</span><span class='op'>(</span><span class='va'>network_graph1</span>, 
            layout <span class='op'>=</span> <span class='st'>"nicely"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_edge_link</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>width<span class='op'>=</span><span class='va'>Weight</span><span class='op'>)</span>, 
                 alpha<span class='op'>=</span><span class='fl'>0.2</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_edge_width</span><span class='op'>(</span>range <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.1</span>, <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_node_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>CurrentEmploymentType</span><span class='op'>)</span>, 
                  size <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
<span class='va'>g</span> <span class='op'>+</span> <span class='fu'>facet_edges</span><span class='op'>(</span><span class='op'>~</span><span class='va'>SentDate</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visual-assignment_files/figure-html5/unnamed-chunk-75-1.png" width="624" /></p>
</div>
<p>using facet nodes</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>g</span> <span class='op'>&lt;-</span> <span class='fu'>ggraph</span><span class='op'>(</span><span class='va'>network_graph2</span>, 
            layout <span class='op'>=</span> <span class='st'>"nicely"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_edge_link</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>width<span class='op'>=</span><span class='va'>Weight</span><span class='op'>)</span>, 
                 alpha<span class='op'>=</span><span class='fl'>0.2</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_edge_width</span><span class='op'>(</span>range <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.1</span>, <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_node_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>CurrentEmploymentType</span><span class='op'>)</span>, 
                  size <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
<span class='va'>g</span> <span class='op'>+</span> <span class='fu'>facet_nodes</span><span class='op'>(</span><span class='op'>~</span><span class='va'>CitizenshipCountry</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>th_foreground</span><span class='op'>(</span>foreground <span class='op'>=</span> <span class='st'>"grey80"</span>,  
                border <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>theme</span><span class='op'>(</span>legend.position <span class='op'>=</span> <span class='st'>'bottom'</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visual-assignment_files/figure-html5/unnamed-chunk-76-1.png" width="624" /></p>
</div>
<p>centrality is used to find the relative role played by different nodes. betweenness provides information on how important the node is. The bigger the node soze, higher th ebetweenness centrality.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>g</span> <span class='op'>&lt;-</span> <span class='va'>network_graph2</span> <span class='op'>%&gt;%</span>
  <span class='fu'>ggraph</span><span class='op'>(</span>layout <span class='op'>=</span> <span class='st'>"fr"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>geom_edge_link</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>width<span class='op'>=</span><span class='va'>Weight</span><span class='op'>)</span>, 
                 alpha<span class='op'>=</span><span class='fl'>0.2</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>scale_edge_width</span><span class='op'>(</span>range <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.1</span>, <span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>geom_node_point</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>colour <span class='op'>=</span> <span class='va'>CitizenshipCountry</span>, 
                      size <span class='op'>=</span> <span class='fu'>centrality_betweenness</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>g</span> <span class='op'>+</span> <span class='fu'>theme_graph</span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="visual-assignment_files/figure-html5/unnamed-chunk-77-1.png" width="624" /></p>
</div>
<h2 id="response-to-questions">4.0 Response to Questions</h2>
<hr />
<h3 id="characterization-of-any-biases-identified-in-the-news-sources">4.2 Characterization of any biases identified in the news sources</h3>
<h4 id="setting-the-scene"><strong>4.2.1 Setting the Scene:</strong></h4>
<p>The newsgroups are divided into 6 clusters based on the their use of the same words. These clusters can be identified with the different color schemes and the thicker the edge between two nodes suggests that the nodes are more similar.</p>
<p>From the text plot, it is visible that cluster number 2 consisting of “Tethys News”, “odern Rubicon”, “Centrum Sentinel” and “Kronos Star” have more number of similar words as the edges connecting them are darker.</p>
<center>
<img src="img/clusters.JPG" style="width:60.0%" />
</center>
<h4 id="content-across-clusters"><strong>4.2.2 Content across Clusters</strong></h4>
<p>The content across all articles in cluster 1 seems to be related to the leader of POK Elian Karel, the government and the police. There also are some traces of water most likely representing the water contamination that is occurring. In the whole, this cluster talks more about the relationship between the police, government and Elian Karel with very little involvement of GasTech company.</p>
<p>On the other hand, cluster 2 focuses more on the POK and avoids targeting any one member of the group. This cluster also takes about the employees withing GasTech which was not seen in cluster 1. Moving on to cluster 3, this is quite similar to cluster 1 other than the fact that ther is not mention of Elian Karel in this cluster.</p>
<center>
<img src="img/textplot1.JPG" style="width:90.0%" />
</center>
<p>The articles in cluster 4 are the only ones that have talked about GAStech CEO Sten Sanjorge, Jr. There is also a strong relation between “gastech”, “international” and “kronos” which could suggest that the CEO has brought up talks about investing in international lad potentially being Kronos. Cluster 5 in general is categorized into two aspect. One talks about the type of company GasTeach is and this can be understood by the relation between “oil”, “energy”, “tethys” and “gas”. The other category talks about the relation between the government and POK.</p>
<p>The last and final cluster mainly focuses on the tension between the police and POK just like in cluster 2 however, there are also some minor article written about health and this is the only cluster that mentioned this.</p>
<center>
<img src="img/textplot2.JPG" style="width:90.0%" />
</center>
<h4 id="comparing-titles"><strong>4.2.3 Comparing Titles</strong></h4>
<p>From the wordcloud below, it is visible that “News Online Today” is the newsgroup that mostly talked about the situation in Kronos.It talked mostly about POK but on the contrast, very little was spoken about the contamination and health of the villagers. Due this, it appears that the newsgroup is biased by targeting the POK group the most. On the other hand, “The Continent” seems to have reported most articles on the calamity, evacuation and discharge but no keywords resemble the GasTech nor the POK. “Everyday News” talked more on the crashes and explode that were occurring in Kronos. The remaining 3 newsgroups appear to be international groups and their keywords are vary diverse and none specifically talking about the situation in Kronos.</p>
<center>
<img src="img/wordcloud.JPG" style="width:90.0%" />
</center>
<h4 id="frequency-of-keywords-in-titles"><strong>4.2.4 Frequency of keywords in Titles</strong></h4>
<p>For the year 2009, the most frequent noun-verb pair in titles is “leader karel”. The other most common keywords such as “karel arrested” suggests that in 2009 POK’s leader Elian Karel has been arrested. Other events that have taken place in this year are “gastech adopting new logo”.</p>
<center>
<img src="img/keywords.JPG" style="width:70.0%" />
</center>
<h4 id="timeline-unfolding-of-events-across-years"><strong>4.2.5 Timeline: Unfolding of Events across Years</strong></h4>
<p>After obtaining all of the most frequent keywords from the titles of all articles across all years, the timeline shows that from 1982 to 1994, there have been talks about foreign investment and this could suggest that the Tethys based GasTech company is looking to invest its company in another country and towards the end of that period, they have settled on Kronos which can be derived from “Shores of Kronos” keyword in 1994.</p>
<p>Within two years of the opening of the company, there have been discussions about possible contamination as seen from keyword in 1997. During the period of 1998 to 2004, there have been many instances where “public health” was in talks and this suggests that the issue on the health due to the contamination by GasTech company was a serious matter and was mentioned in many articles. From 2007 onward, we can see keywords representing protests which represents the POK becoming stronger year after year.</p>
<center>
<img src="img/timeline.JPG" style="width:90.0%" />
</center>
<hr />
<h3 id="exploring-relationships">4.3 Exploring Relationships</h3>
<center>
<img src="img/emailnetwork1.JPG" style="width:90.0%" />
</center>
<h4 id="citizenship-biases-in-employment-type"><strong>4.3.3 Citizenship Biases in Employment Type</strong></h4>
<p>The employees who are Kronos citizens were only offered employment in the administration, facilities and security. All the higher profile jobs such as engineering, information technology and executive were only offered to those who are Tethys citizens.</p>
<center>
<img src="img/citizenship.JPG" style="width:90.0%" />
</center>
<center>
<img src="img/citizenship2.JPG" style="width:90.0%" />
</center>
<h2 id="storyboard-for-r-shiny">5.0 Storyboard for R-Shiny</h2>
<div class="sourceCode" id="cb27"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
